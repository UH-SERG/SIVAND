
Original sample:

{"has_bug": false, "bug_kind": 0, "bug_kind_name": "NONE", "source_tokens": ["#NEWLINE#", "def notify_participants(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "log", "(", "'Notifying participants.'", ")", "#NEWLINE#", "(", "ts_start", ",", "ts_end", ")", "=", "(", "self", ".", "ts_start", ",", "self", ".", "ts_end", ")", "#NEWLINE#", "exchanges", "=", "self", ".", "db", ".", "all", "(", "'\\n            SELECT e.id, amount, fee, note, status, p.*::participants AS participant\\n              FROM exchanges e\\n              JOIN participants p ON e.participant = p.username\\n             WHERE \"timestamp\" >= %(ts_start)s\\n               AND \"timestamp\" < %(ts_end)s\\n               AND amount > 0\\n               AND p.notify_charge > 0\\n        '", ",", "locals", "(", ")", ")", "#NEWLINE#", "for", "e", "in", "exchanges", ":", "#NEWLINE#", "#INDENT#", "if", "(", "e", ".", "status", "not in", "(", "'failed'", ",", "'succeeded'", ")", ")", ":", "#NEWLINE#", "#INDENT#", "log", "(", "(", "'exchange %s has an unexpected status: %s'", "%", "(", "e", ".", "id", ",", "e", ".", "status", ")", ")", ")", "#NEWLINE#", "continue", "#NEWLINE#", "#UNINDENT#", "i", "=", "(", "1", "if", "(", "e", ".", "status", "==", "'failed'", ")", "else", "2", ")", "#NEWLINE#", "p", "=", "e", ".", "participant", "#NEWLINE#", "if", "(", "(", "p", ".", "notify_charge", "&", "i", ")", "==", "0", ")", ":", "#NEWLINE#", "#INDENT#", "continue", "#NEWLINE#", "#UNINDENT#", "username", "=", "p", ".", "username", "#NEWLINE#", "(", "nteams", ",", "top_team", ")", "=", "self", ".", "db", ".", "one", "(", "\"\\n                WITH tippees AS (\\n                         SELECT t.slug, amount\\n                           FROM ( SELECT DISTINCT ON (team) team, amount\\n                                    FROM payment_instructions\\n                                   WHERE mtime < %(ts_start)s\\n                                     AND participant = %(username)s\\n                                ORDER BY team, mtime DESC\\n                                ) s\\n                           JOIN teams t ON s.team = t.slug\\n                           JOIN participants p ON t.owner = p.username\\n                          WHERE s.amount > 0\\n                            AND t.is_approved IS true\\n                            AND t.is_closed IS NOT true\\n                            AND (SELECT count(*)\\n                                   FROM current_exchange_routes er\\n                                  WHERE er.participant = p.id\\n                                    AND network = 'paypal'\\n                                    AND error = ''\\n                                ) > 0\\n                     )\\n                SELECT ( SELECT count(*) FROM tippees ) AS nteams\\n                     , ( SELECT slug\\n                           FROM tippees\\n                       ORDER BY amount DESC\\n                          LIMIT 1\\n                       ) AS top_team\\n            \"", ",", "locals", "(", ")", ")", "#NEWLINE#", "p", ".", "queue_email", "(", "(", "'charge_'", "+", "e", ".", "status", ")", ",", "exchange", "=", "dict", "(", "id", "=", "e", ".", "id", ",", "amount", "=", "e", ".", "amount", ",", "fee", "=", "e", ".", "fee", ",", "note", "=", "e", ".", "note", ")", ",", "nteams", "=", "nteams", ",", "top_team", "=", "top_team", ")"], "error_location": [0], "repair_targets": [], "repair_candidates": [13, 21, 15, 25, 132, 191, 193, 134, 195, 197, 2, 19, 23, 30, 137, 44, 52, 71, 75, 91, 103, 157, 168, 174, 180, 186, 85, 114, 101, 110, 127, 150, 28, 46, 125, 129], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "gratipay/gratipay.com/gratipay/billing/payday.py", "license": "mit", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 249, "results": {"model": "transformer", "prob": {"loc": [[0.9487375020980835, 5.454812708194368e-06, 9.624425274523674e-07, 4.654926044622698e-08, 1.172713979258333e-07, 1.2373057245440577e-07, 8.979641563655605e-08, 1.250759567028581e-07, 5.109648171242043e-08, 3.4622757993929554e-07, 5.564579552697069e-08, 4.788238072706008e-08, 6.991961232216681e-09, 3.0617788979725447e-06, 2.7129892998800642e-08, 6.006832791172201e-06, 1.5077725734613523e-08, 2.6885155435252273e-08, 1.1571816571631643e-07, 7.834607822587714e-05, 1.3771837359399797e-07, 2.1845556474886507e-08, 1.1859198423280759e-07, 0.00023640086874365807, 1.8543806845627842e-07, 5.125324165078382e-08, 1.0383855908457917e-07, 4.3542723204836875e-08, 8.225476449297275e-06, 4.021394062192485e-08, 5.917643193242839e-06, 5.2155673557763294e-08, 1.295769322950946e-07, 1.1722051596052552e-07, 1.5535566433300119e-07, 5.559988949244143e-07, 1.809551463338721e-06, 1.3228265061115962e-07, 1.0688909668488122e-07, 2.061356553895166e-06, 9.351487619824184e-07, 2.0914642107072723e-07, 1.8249644995194103e-07, 9.230925002157164e-08, 4.694644303526729e-06, 3.269832049568322e-08, 0.0022941422648727894, 1.2225323189340997e-06, 4.979442564945202e-07, 1.7204834534823021e-07, 1.021129349965122e-07, 1.9266259698724753e-07, 0.00014513515634462237, 3.3432726809223823e-07, 4.0268361090056715e-08, 7.862177398010317e-08, 7.40631946882786e-07, 2.6654145131033147e-06, 3.2050297704699915e-07, 1.2399880233715521e-06, 1.408130714253275e-07, 8.187683420146641e-08, 3.4854963359975955e-07, 2.365373887869282e-07, 1.2238440660894412e-07, 1.711763530920507e-07, 8.631965187078094e-08, 2.0141996515121718e-07, 2.526139951442019e-06, 1.6081757792107965e-07, 2.2317111358916009e-07, 0.0006427261396311224, 8.063009317993419e-07, 1.785828658285027e-07, 1.0094888835965321e-07, 0.0002703825302887708, 1.2005614280496957e-06, 4.013262184798805e-07, 4.169150713551062e-07, 6.036594299985154e-07, 6.410190849237551e-07, 2.8578966748682433e-07, 2.1737191957527102e-07, 2.4757835603850253e-07, 1.5770947925375367e-07, 5.3980174925527535e-06, 9.722297988901119e-08, 8.149623909048387e-07, 6.084041615395108e-06, 5.037427968090924e-07, 1.2663114148381283e-06, 0.000489519617985934, 5.849323088114033e-07, 3.8147064174154366e-08, 1.8553286906808353e-07, 6.576611667696852e-06, 2.851566875960998e-07, 3.0800609351899766e-07, 2.184775803470984e-05, 5.955550363978546e-07, 5.097760436001408e-07, 2.555181254138006e-06, 1.327893812685943e-07, 0.0010835076682269573, 6.512856884910434e-07, 2.6555505883152364e-07, 2.984510501846671e-06, 8.426993645116454e-07, 1.694966869081327e-07, 6.090953684179112e-05, 0.004369708243757486, 1.473607994739723e-06, 1.4680154869495254e-08, 1.5284459209397028e-07, 0.0037791579961776733, 7.251340150560281e-08, 4.385019849451055e-07, 2.3023996618576348e-05, 1.498583742431947e-06, 2.8269309950701427e-06, 1.8041770317722694e-06, 1.0565030379439122e-06, 1.0101091902470216e-05, 1.882624815152667e-06, 1.7796817246562568e-06, 6.595884656235285e-07, 1.6051816942308506e-07, 0.005608333740383387, 1.972202426259173e-06, 7.464432627557471e-08, 1.486157543695299e-06, 8.14585945363433e-08, 0.000112176887341775, 6.689807605653186e-07, 2.753223634499591e-05, 7.474219643199831e-08, 9.188016747430083e-07, 0.00010337502317270264, 5.59016143597546e-07, 6.132171392891905e-07, 6.17382852396986e-07, 1.873992339085362e-08, 2.947504299299908e-06, 1.7503960407339036e-05, 7.034633426883374e-07, 1.0486002111065318e-06, 0.00021472261869348586, 4.335241101216525e-06, 3.910391114914091e-06, 2.3742704797768965e-06, 6.98544965871406e-07, 1.3643776242133754e-07, 2.753490058182706e-08, 7.067825436024577e-07, 2.4427724838460563e-06, 2.4886994651751593e-05, 9.567594361215015e-07, 0.0015577457379549742, 2.5607971565477783e-06, 1.7622714665321837e-07, 3.201220692972129e-07, 5.216316480982641e-07, 5.174399575480493e-07, 5.31734258402139e-07, 9.157208182841714e-07, 1.1223135061300127e-06, 1.931778342623147e-06, 1.3589399259217316e-06, 0.002180070150643587, 1.6101039364002645e-06, 1.2091336998309998e-07, 1.272784544426031e-07, 4.9209684220841154e-06, 8.923252607928589e-07, 0.002193169202655554, 1.4998332744653453e-06, 5.205033559718686e-08, 1.350200165006754e-07, 7.77212179059461e-08, 6.723437309119618e-07, 0.0037598388735204935, 1.148658839156269e-06, 1.0612451362135289e-08, 1.759497223474682e-07, 2.2409682998159042e-08, 7.259585004248947e-07, 0.012491892091929913, 1.4136373920337064e-06, 4.0394052547299e-08, 5.014219937038433e-07, 1.6598879426510393e-07, 2.465332181600388e-05, 1.1700525419655605e-06, 0.008290881291031837, 1.840162155986036e-07, 5.303703574099927e-07, 3.094440614859195e-07, 0.0009915308328345418, 7.923761700112664e-07]], "pointer": [[0.0, 0.0, 0.03888041526079178, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.09978720545768738, 0.0, 0.059170521795749664, 0.0, 0.0, 0.0, 0.014405411668121815, 0.0, 0.006781946402043104, 0.0, 0.0149445915594697, 0.0, 0.0010491199791431427, 0.0, 0.0, 0.016983777284622192, 0.0, 0.00713545735925436, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.08239840716123581, 0.0, 0.00015422409342136234, 0.0, 0.0, 0.0, 0.0, 0.0, 0.005343400873243809, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.005660498049110174, 0.0, 0.0, 0.0, 0.00807463750243187, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.03627052158117294, 0.0, 0.0, 0.0, 0.0, 0.0, 0.009430911391973495, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0555947944521904, 0.0, 0.019378721714019775, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.06454174220561981, 0.0, 0.0, 0.0, 0.0012945305788889527, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.23046483099460602, 0.0, 0.008348673582077026, 0.0, 0.023381631821393967, 0.0, 0.0, 0.013207906857132912, 0.0, 0.012583690695464611, 0.0, 0.0, 0.014811374247074127, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.010908148251473904, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.009150172583758831, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.014734901487827301, 0.0, 0.0, 0.0, 0.0, 0.0, 0.05106838420033455, 0.0, 0.0, 0.0, 0.0, 0.0, 0.051241759210824966, 0.0, 0.0, 0.0, 0.0, 0.0, 0.012359892018139362, 0.0, 0.0, 0.0, 0.0, 0.0001855941955000162, 0.0, 4.878264735452831e-05, 0.0, 0.00019496440654620528, 0.0, 2.848578333214391e-05, 0.0]], "target": [0.0]}, "loss": [0.052623119205236435, 0.0], "acc": [1.0, 0.0, 0.0, 0.0]}}


All source tokens:

['#NEWLINE#', 'def notify_participants(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', 'log', '(', "'Notifying participants.'", ')', '#NEWLINE#', '(', 'ts_start', ',', 'ts_end', ')', '=', '(', 'self', '.', 'ts_start', ',', 'self', '.', 'ts_end', ')', '#NEWLINE#', 'exchanges', '=', 'self', '.', 'db', '.', 'all', '(', '\'\\n            SELECT e.id, amount, fee, note, status, p.*::participants AS participant\\n              FROM exchanges e\\n              JOIN participants p ON e.participant = p.username\\n             WHERE "timestamp" >= %(ts_start)s\\n               AND "timestamp" < %(ts_end)s\\n               AND amount > 0\\n               AND p.notify_charge > 0\\n        \'', ',', 'locals', '(', ')', ')', '#NEWLINE#', 'for', 'e', 'in', 'exchanges', ':', '#NEWLINE#', '#INDENT#', 'if', '(', 'e', '.', 'status', 'not in', '(', "'failed'", ',', "'succeeded'", ')', ')', ':', '#NEWLINE#', '#INDENT#', 'log', '(', '(', "'exchange %s has an unexpected status: %s'", '%', '(', 'e', '.', 'id', ',', 'e', '.', 'status', ')', ')', ')', '#NEWLINE#', 'continue', '#NEWLINE#', '#UNINDENT#', 'i', '=', '(', '1', 'if', '(', 'e', '.', 'status', '==', "'failed'", ')', 'else', '2', ')', '#NEWLINE#', 'p', '=', 'e', '.', 'participant', '#NEWLINE#', 'if', '(', '(', 'p', '.', 'notify_charge', '&', 'i', ')', '==', '0', ')', ':', '#NEWLINE#', '#INDENT#', 'continue', '#NEWLINE#', '#UNINDENT#', 'username', '=', 'p', '.', 'username', '#NEWLINE#', '(', 'nteams', ',', 'top_team', ')', '=', 'self', '.', 'db', '.', 'one', '(', '"\\n                WITH tippees AS (\\n                         SELECT t.slug, amount\\n                           FROM ( SELECT DISTINCT ON (team) team, amount\\n                                    FROM payment_instructions\\n                                   WHERE mtime < %(ts_start)s\\n                                     AND participant = %(username)s\\n                                ORDER BY team, mtime DESC\\n                                ) s\\n                           JOIN teams t ON s.team = t.slug\\n                           JOIN participants p ON t.owner = p.username\\n                          WHERE s.amount > 0\\n                            AND t.is_approved IS true\\n                            AND t.is_closed IS NOT true\\n                            AND (SELECT count(*)\\n                                   FROM current_exchange_routes er\\n                                  WHERE er.participant = p.id\\n                                    AND network = \'paypal\'\\n                                    AND error = \'\'\\n                                ) > 0\\n                     )\\n                SELECT ( SELECT count(*) FROM tippees ) AS nteams\\n                     , ( SELECT slug\\n                           FROM tippees\\n                       ORDER BY amount DESC\\n                          LIMIT 1\\n                       ) AS top_team\\n            "', ',', 'locals', '(', ')', ')', '#NEWLINE#', 'p', '.', 'queue_email', '(', '(', "'charge_'", '+', 'e', '.', 'status', ')', ',', 'exchange', '=', 'dict', '(', 'id', '=', 'e', '.', 'id', ',', 'amount', '=', 'e', '.', 'amount', ',', 'fee', '=', 'e', '.', 'fee', ',', 'note', '=', 'e', '.', 'note', ')', ',', 'nteams', '=', 'nteams', ',', 'top_team', '=', 'top_team', ')']


All attention probs:

[0.013188651762902737, 0.008656089194118977, 0.03475642204284668, 0.012022420763969421, 0.008543984033167362, 0.00732741504907608, 0.006048774346709251, 0.01383152510970831, 0.005001353099942207, 0.006780003197491169, 0.00654233293607831, 0.007756942417472601, 0.007004636339843273, 0.017539268359541893, 0.00708770751953125, 0.013289064168930054, 0.007110814563930035, 0.005401719827204943, 0.005039334762841463, 0.015011032111942768, 0.004558360204100609, 0.004622365813702345, 0.004261225927621126, 0.014695319347083569, 0.0038829073309898376, 0.0035250254441052675, 0.0030571804381906986, 0.004649272188544273, 0.013758868910372257, 0.003629787126556039, 0.008047693409025669, 0.002632624004036188, 0.0028467613738030195, 0.0028027831576764584, 0.003346509300172329, 0.00299682654440403, 0.0034472739789634943, 0.00324432784691453, 0.005752130877226591, 0.003754483303055167, 0.003405037336051464, 0.0026310484390705824, 0.005194358993321657, 0.00409128051251173, 0.01779910735785961, 0.004417328163981438, 0.012801342643797398, 0.0028114458546042442, 0.0034467463847249746, 0.0036332104355096817, 0.003105029696598649, 0.002346500288695097, 0.007780738174915314, 0.0020770165137946606, 0.0025959969498217106, 0.002190220868214965, 0.002198463771492243, 0.0038212123326957226, 0.0023668615613132715, 0.004685782827436924, 0.0024721967056393623, 0.002155010588467121, 0.002497568493708968, 0.002740981290116906, 0.0028152375016361475, 0.00759147759526968, 0.002560048596933484, 0.0028369890060275793, 0.005521242972463369, 0.002587484195828438, 0.0024686248507350683, 0.008344979025423527, 0.0019913765136152506, 0.0027602948248386383, 0.0023533881176263094, 0.007604015991091728, 0.0018943691393360496, 0.002728109946474433, 0.001773181022144854, 0.0022806881461292505, 0.002175641944631934, 0.003441253211349249, 0.002731664339080453, 0.002735765650868416, 0.0029263838659971952, 0.008474794216454029, 0.0027447789907455444, 0.0029582257848232985, 0.00401260843500495, 0.0030286251567304134, 0.002052450552582741, 0.006772099528461695, 0.0017514912178739905, 0.00216626632027328, 0.002107847947627306, 0.003630721941590309, 0.0020235583651810884, 0.0020710674580186605, 0.005131583195179701, 0.0023073714692145586, 0.003962225746363401, 0.01285060029476881, 0.003412846243008971, 0.008291991427540779, 0.002260081237182021, 0.002250464167445898, 0.003354189917445183, 0.0035756174474954605, 0.001596547313965857, 0.0030361672397702932, 0.02458721399307251, 0.002325796289369464, 0.0038996993098407984, 0.0022458031307905912, 0.011364508420228958, 0.00205426849424839, 0.0021564732305705547, 0.005159169901162386, 0.0021425271406769753, 0.0023270936217159033, 0.0027450246270745993, 0.00272360909730196, 0.003505749860778451, 0.0030818944796919823, 0.0034514379221946, 0.010733296163380146, 0.005185684189200401, 0.014622766524553299, 0.001872419728897512, 0.0020994849037379026, 0.0037697535008192062, 0.0032588280737400055, 0.010286600328981876, 0.0024854238145053387, 0.008704541251063347, 0.0022688035387545824, 0.0021500466391444206, 0.006623199675232172, 0.0012951702810823917, 0.0016775478143244982, 0.00148947408888489, 0.0024412309285253286, 0.0023368955589830875, 0.0029030845034867525, 0.0019604044500738382, 0.005285725463181734, 0.004195018205791712, 0.0022030093241482973, 0.002021177439019084, 0.0036147048231214285, 0.006834841798990965, 0.0024040061980485916, 0.003215524135157466, 0.0033112375531345606, 0.00343122985213995, 0.004360508173704147, 0.0031437231227755547, 0.008087283000349998, 0.0021852352656424046, 0.0027280510403215885, 0.0024467390030622482, 0.0024824782740324736, 0.006586688105016947, 0.002507484517991543, 0.0025396354030817747, 0.0023696471471339464, 0.005923260003328323, 0.0023767086677253246, 0.00965808518230915, 0.0016744979657232761, 0.002263719215989113, 0.00198005442507565, 0.009146416559815407, 0.0032974418718367815, 0.010872230865061283, 0.001793431700207293, 0.002846443559974432, 0.002199663780629635, 0.006214678753167391, 0.0027861790731549263, 0.011401024647057056, 0.0019772092346102, 0.0028614290058612823, 0.0027472623623907566, 0.006370298098772764, 0.0040199789218604565, 0.012137160636484623, 0.0036096116527915, 0.0030011495109647512, 0.004086492583155632, 0.004459291696548462, 0.01121267769485712, 0.00449417345225811, 0.015691138803958893, 0.0037868954241275787, 0.01047119963914156, 0.0033248993568122387, 0.012165817432105541, 0.002598463324829936]


Top-k source tokens:

['self', 'p', 'e', 'ts_start', 'nteams', 'self', 'self', 'p', 'log', 'exchanges']


Top-k attention probs:

[0.03475642204284668, 0.02458721399307251, 0.01779910735785961, 0.017539268359541893, 0.015691138803958893, 0.015011032111942768, 0.014695319347083569, 0.014622766524553299, 0.01383152510970831, 0.013758868910372257]
