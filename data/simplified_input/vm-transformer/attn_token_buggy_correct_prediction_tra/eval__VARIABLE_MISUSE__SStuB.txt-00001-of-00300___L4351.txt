
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "@", "patch", "(", "'socket.socket'", ")", "#NEWLINE#", "@", "patch", "(", "'select.select'", ",", "return_value", "=", "(", "True", ",", "False", ",", "False", ")", ")", "#NEWLINE#", "def test_update_returns_if_template_render_fails(", "self", ",", "mock_select", ",", "mock_socket", ")", ":", "#NEWLINE#", "#INDENT#", "'Should return None if rendering the template fails.'", "#NEWLINE#", "test_value", "=", "'test_value'", "#NEWLINE#", "mock_socket", "=", "mock_socket", "(", ")", ".", "__enter__", "(", ")", "#NEWLINE#", "mock_socket", ".", "recv", ".", "return_value", "=", "test_value", ".", "encode", "(", ")", "#NEWLINE#", "config", "=", "copy", "(", "TEST_CONFIG", ")", "#NEWLINE#", "config", "[", "tcp", ".", "CONF_VALUE_TEMPLATE", "]", "=", "\"{{ this won't work\"", "#NEWLINE#", "sensor", "=", "tcp", ".", "Sensor", "(", "test_value", ".", "hass", ",", "config", ")", "#NEWLINE#", "assert", "(", "sensor", ".", "update", "(", ")", "is", "None", ")"], "error_location": [83], "repair_targets": [24], "repair_candidates": [28, 39, 41, 49, 77, 92, 61, 68, 87, 26, 24, 35, 55, 83], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "home-assistant/home-assistant/tests/components/sensor/test_tcp.py", "license": "apache-2.0", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00001-of-00300", "js_count": 4351, "results": {"model": "transformer", "prob": {"loc": [[0.049403801560401917, 6.946319075495921e-08, 8.835533193973788e-09, 1.802875182477237e-08, 7.70825359097671e-09, 6.7324719132955124e-09, 5.2749618006942e-09, 2.7968607430040038e-09, 1.7457132406306641e-09, 6.5743068766721535e-09, 1.643149616370465e-08, 2.0735759775902807e-09, 5.553253856760421e-09, 1.3148745203750423e-08, 2.1703563390929048e-08, 1.3244265240075492e-08, 4.64344074302403e-09, 8.923329630761145e-09, 5.175619044450741e-09, 1.5346893533774164e-08, 7.3402985911741325e-09, 5.310556883131312e-09, 1.3417444044705462e-08, 6.5670624493918694e-09, 1.153473203885369e-05, 6.28106544553475e-09, 6.020066507517186e-07, 7.10016001548297e-09, 8.872847274687956e-07, 6.315266087852933e-09, 1.4834486528059188e-08, 1.2005798133429835e-08, 8.615266722244996e-09, 3.387303237900596e-08, 9.7069889903878e-09, 4.14185983288462e-08, 5.149871640242054e-08, 2.2373755825810804e-07, 2.2492159246212395e-08, 7.907298709142196e-07, 9.98329596768599e-08, 8.768142834014725e-06, 1.3745753335570043e-07, 8.31196246053878e-07, 1.4610540688408946e-07, 1.3881591875986032e-08, 1.9601114331635472e-07, 4.112237093067961e-07, 7.129271750727639e-08, 1.8687824194785208e-05, 6.947723818484519e-08, 4.587557445034918e-09, 5.49849232811539e-08, 1.1432502944330736e-08, 1.4335031828238698e-08, 1.5122686818358488e-06, 7.427932757764211e-08, 6.367249838490352e-09, 7.131804977689171e-07, 1.913559088961847e-07, 6.538220986840315e-08, 2.1965922769595636e-07, 5.98561271658582e-08, 1.292658513563083e-08, 1.0436052662043949e-06, 0.00014948670286685228, 2.892092254569434e-07, 1.383232159923864e-07, 2.92672666546423e-06, 1.1300608093733899e-07, 0.0030875077936798334, 1.0726736121569047e-07, 7.481479258331092e-08, 2.3519095293522696e-07, 1.1425506727391621e-06, 1.6547568293390214e-06, 1.4271665804699296e-07, 2.8755525249835046e-07, 1.8517184230404382e-08, 9.153156952379504e-07, 1.3505311358130712e-07, 3.3130027610184243e-09, 6.466341915256635e-07, 0.9471411108970642, 2.6663056473807956e-07, 2.8225050741070845e-08, 1.9822803665192623e-07, 0.0001430605334462598, 2.1968060082144802e-07, 1.9189006650321971e-07, 9.430601011217732e-08, 1.660614827869722e-07, 7.878654287196696e-06, 8.609882939936142e-08, 1.3362662087956778e-08, 2.7506584956427105e-06, 1.0921525017693057e-06, 3.830813511740416e-06, 7.090328608683194e-07, 8.29409145808313e-07]], "pointer": [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8943974375724792, 0.0, 0.009472673758864403, 0.0, 0.0011556079844012856, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0023473806213587523, 0.0, 0.0, 0.0, 0.0742540955543518, 0.0, 5.133980812388472e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.004696042276918888, 0.0, 0.0, 0.0, 0.0, 0.0, 8.149134373525158e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.007835885509848595, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0006952422554604709, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0041718194261193275, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00019174820045009255, 0.0, 0.0, 0.0, 0.00024227202811744064, 0.0, 0.0, 0.0, 0.0, 0.0004070236755069345, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], "target": [0.8943974375724792]}, "loss": [0.05430709198117256, 0.11160504072904587], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', '@', 'patch', '(', "'socket.socket'", ')', '#NEWLINE#', '@', 'patch', '(', "'select.select'", ',', 'return_value', '=', '(', 'True', ',', 'False', ',', 'False', ')', ')', '#NEWLINE#', 'def test_update_returns_if_template_render_fails(', 'self', ',', 'mock_select', ',', 'mock_socket', ')', ':', '#NEWLINE#', '#INDENT#', "'Should return None if rendering the template fails.'", '#NEWLINE#', 'test_value', '=', "'test_value'", '#NEWLINE#', 'mock_socket', '=', 'mock_socket', '(', ')', '.', '__enter__', '(', ')', '#NEWLINE#', 'mock_socket', '.', 'recv', '.', 'return_value', '=', 'test_value', '.', 'encode', '(', ')', '#NEWLINE#', 'config', '=', 'copy', '(', 'TEST_CONFIG', ')', '#NEWLINE#', 'config', '[', 'tcp', '.', 'CONF_VALUE_TEMPLATE', ']', '=', '"{{ this won\'t work"', '#NEWLINE#', 'sensor', '=', 'tcp', '.', 'Sensor', '(', 'test_value', '.', 'hass', ',', 'config', ')', '#NEWLINE#', 'assert', '(', 'sensor', '.', 'update', '(', ')', 'is', 'None', ')']


All attention probs:

[0.019104063510894775, 0.011930044740438461, 0.01891389489173889, 0.015258267521858215, 0.012898939661681652, 0.009054836817085743, 0.010390972718596458, 0.008518973365426064, 0.012353953905403614, 0.010344273410737514, 0.015772484242916107, 0.010861129499971867, 0.015297762118279934, 0.008074224926531315, 0.007825907319784164, 0.009016016498208046, 0.008042920380830765, 0.008524354547262192, 0.007736986503005028, 0.007937869988381863, 0.0071111093275249004, 0.005838851444423199, 0.010228810831904411, 0.004974357318133116, 0.05271872133016586, 0.006946326699107885, 0.017639173194766045, 0.007594688795506954, 0.020381014794111252, 0.006225840654224157, 0.006342648062855005, 0.006419440731406212, 0.00617756275460124, 0.00603470578789711, 0.006614236161112785, 0.02163250371813774, 0.005867473315447569, 0.008385282009840012, 0.007468205876648426, 0.018809877336025238, 0.004961827769875526, 0.010455259121954441, 0.008305546827614307, 0.005784250795841217, 0.004110693000257015, 0.007026314735412598, 0.0053603085689246655, 0.004432540386915207, 0.007892968133091927, 0.0166969895362854, 0.003700750647112727, 0.005472906399518251, 0.003484937362372875, 0.005290098022669554, 0.004309845622628927, 0.015623454935848713, 0.0033045404125005007, 0.0040263100527226925, 0.006326620001345873, 0.004677352961152792, 0.006993405055254698, 0.018269645050168037, 0.008246916346251965, 0.005391950719058514, 0.005262662656605244, 0.013582632876932621, 0.005490540061146021, 0.00895015336573124, 0.018100572749972343, 0.01166368369013071, 0.016899287700653076, 0.003758036997169256, 0.0038069614674896, 0.0049322061240673065, 0.0044876886531710625, 0.005044121295213699, 0.007198848761618137, 0.023529930040240288, 0.008647720329463482, 0.008905413560569286, 0.003264153376221657, 0.004626080393791199, 0.005552239250391722, 0.05716440826654434, 0.004369737114757299, 0.00836095865815878, 0.0056115505285561085, 0.02867893874645233, 0.0059862295165658, 0.007753179874271154, 0.008344332687556744, 0.005130615085363388, 0.016943901777267456, 0.0038888740818947554, 0.006551840342581272, 0.008484945632517338, 0.007455101236701012, 0.010565085336565971, 0.010176202282309532, 0.009417016990482807]


Top-k source tokens:

['test_value', 'self', 'config', 'sensor', 'test_value', 'mock_socket', '#NEWLINE#', 'patch', 'mock_socket', 'config']


Top-k attention probs:

[0.05716440826654434, 0.05271872133016586, 0.02867893874645233, 0.023529930040240288, 0.02163250371813774, 0.020381014794111252, 0.019104063510894775, 0.01891389489173889, 0.018809877336025238, 0.018269645050168037]
