
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "def test_subtransaction_on_noautocommit(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "(", "User", ",", "users", ")", "=", "(", "users", ".", "classes", ".", "User", ",", "self", ".", "tables", ".", "users", ")", "#NEWLINE#", "mapper", "(", "User", ",", "users", ")", "#NEWLINE#", "sess", "=", "create_session", "(", "autocommit", "=", "False", ",", "autoflush", "=", "True", ")", "#NEWLINE#", "sess", ".", "begin", "(", "subtransactions", "=", "True", ")", "#NEWLINE#", "u", "=", "User", "(", "name", "=", "'u1'", ")", "#NEWLINE#", "sess", ".", "add", "(", "u", ")", "#NEWLINE#", "sess", ".", "flush", "(", ")", "#NEWLINE#", "sess", ".", "commit", "(", ")", "#NEWLINE#", "sess", ".", "rollback", "(", ")", "#NEWLINE#", "assert", "(", "len", "(", "sess", ".", "query", "(", "User", ")", ".", "all", "(", ")", ")", "==", "0", ")", "#NEWLINE#", "sess", ".", "close", "(", ")"], "error_location": [14], "repair_targets": [2, 20], "repair_candidates": [10, 14, 24, 31, 2, 20, 8, 18, 29, 58, 98, 34, 47, 65, 72, 78, 84, 94, 109, 56, 69], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "zzzeek/sqlalchemy/test/orm/test_transaction.py", "license": "mit", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 2463, "results": {"model": "transformer", "prob": {"loc": [[0.00010855872824322432, 5.501106792316079e-10, 5.174600303803345e-09, 7.825057442290007e-12, 1.0458708551985829e-11, 1.1292136496698912e-11, 7.374764861289851e-12, 1.155885717002425e-12, 2.545432198353126e-10, 2.1396025142589314e-12, 1.2772265189919807e-10, 3.115877564643932e-12, 5.9230892759942755e-12, 4.919145646375966e-10, 0.9998878240585327, 2.1994200904984496e-10, 2.9035531312615603e-08, 2.837593493509871e-10, 4.689201804630727e-10, 6.057844503803977e-11, 9.277039225707995e-07, 2.6729620253296282e-11, 1.408251119883186e-11, 3.526573824630397e-11, 6.476299357904836e-11, 1.1569782458475952e-11, 6.160060309068349e-12, 3.386390777168624e-12, 1.4008170491630612e-11, 1.6699149227861199e-06, 1.231622616393313e-11, 6.7663205527424e-07, 2.659856015996276e-11, 1.979190943079967e-11, 3.674788529028916e-10, 4.138606471415507e-11, 1.1459705580307844e-11, 4.418879151479871e-11, 9.59684675477801e-12, 1.6167349403684028e-10, 7.4516343095965e-10, 2.643847467342919e-11, 4.8449924627824714e-12, 6.508719258002671e-11, 1.1372640607021367e-09, 8.903528608827926e-11, 3.538067755437524e-11, 8.124691024125053e-12, 2.7727953613720935e-11, 2.030756205556594e-12, 1.2973739270394358e-11, 8.920521439581552e-12, 7.756557895977068e-11, 5.639293476633611e-09, 1.6520627921234876e-10, 1.4048473495620328e-10, 1.4038892270917813e-09, 2.1900838781396814e-11, 4.923531804479353e-09, 7.719806738304413e-11, 7.643516375388515e-11, 9.466609440789142e-11, 1.36647770876408e-09, 5.444935613496682e-10, 1.0425254409751616e-10, 8.94260498984778e-11, 7.037844612645117e-11, 3.6345640039292526e-12, 7.730326795352127e-11, 9.918287702248563e-08, 1.0487883894683137e-09, 2.1131414673636328e-10, 2.201164944759526e-11, 7.913843191875714e-11, 7.933486333155937e-12, 1.1162393231956003e-10, 1.4657648428340053e-09, 1.726324916351274e-10, 2.1457267906921373e-10, 1.0969296998508682e-10, 6.8565292332678496e-12, 2.1674202710375567e-10, 1.2663959880754305e-09, 1.0243735720782965e-10, 2.5383717697224917e-11, 1.1269162686344814e-10, 2.9103282284115295e-12, 2.9663851930372687e-10, 6.181181122499879e-10, 1.2323776721334667e-10, 2.7094316373821314e-11, 4.026982219906827e-11, 4.362128019907985e-11, 1.0940732347863857e-10, 1.2490807277387717e-09, 1.4237243328718563e-10, 8.681461799442403e-12, 1.6545635694864558e-10, 1.1824390355741343e-07, 8.955939878596553e-10, 1.7722930067964882e-10, 6.481906591332409e-12, 9.913851961584896e-10, 5.99170324466769e-10, 2.4409746793296883e-11, 3.147128738167915e-11, 8.934618378475534e-09, 2.161714557358252e-10, 4.788631297047985e-11, 5.978390005267897e-11, 9.817184565275028e-11, 2.8794573062734807e-12, 3.8390717688185916e-11, 6.772364891105553e-10]], "pointer": [[0.0, 0.0, 0.14219190180301666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00011442690447438508, 0.0, 4.0147688196157105e-06, 0.0, 0.0, 0.0, 1.6193240526263253e-07, 0.0, 0.0, 0.0, 3.850485427392414e-06, 0.0, 0.8576197624206543, 0.0, 0.0, 0.0, 2.0959166135980922e-07, 0.0, 0.0, 0.0, 0.0, 5.881065590074286e-05, 0.0, 1.5783827223003755e-07, 0.0, 0.0, 3.5564771678764373e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.6481125442169287e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.327191902575578e-07, 0.0, 8.732261136401576e-09, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.494080402788313e-08, 0.0, 0.0, 0.0, 1.691122974989412e-08, 0.0, 0.0, 6.48670805958318e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0647876536040712e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 1.1596495141930063e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.09145349319806e-08, 0.0, 0.0, 0.0, 2.1405603547464125e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.4692445300142936e-08, 0.0, 0.0, 0.0, 0.0]], "target": [0.9998116493225098]}, "loss": [0.00011216964776394889, 0.00018836841627489775], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', 'def test_subtransaction_on_noautocommit(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', '(', 'User', ',', 'users', ')', '=', '(', 'users', '.', 'classes', '.', 'User', ',', 'self', '.', 'tables', '.', 'users', ')', '#NEWLINE#', 'mapper', '(', 'User', ',', 'users', ')', '#NEWLINE#', 'sess', '=', 'create_session', '(', 'autocommit', '=', 'False', ',', 'autoflush', '=', 'True', ')', '#NEWLINE#', 'sess', '.', 'begin', '(', 'subtransactions', '=', 'True', ')', '#NEWLINE#', 'u', '=', 'User', '(', 'name', '=', "'u1'", ')', '#NEWLINE#', 'sess', '.', 'add', '(', 'u', ')', '#NEWLINE#', 'sess', '.', 'flush', '(', ')', '#NEWLINE#', 'sess', '.', 'commit', '(', ')', '#NEWLINE#', 'sess', '.', 'rollback', '(', ')', '#NEWLINE#', 'assert', '(', 'len', '(', 'sess', '.', 'query', '(', 'User', ')', '.', 'all', '(', ')', ')', '==', '0', ')', '#NEWLINE#', 'sess', '.', 'close', '(', ')']


All attention probs:

[0.0193636491894722, 0.00993022695183754, 0.06092571094632149, 0.013864795677363873, 0.00961404386907816, 0.010332770645618439, 0.0092574842274189, 0.009670929983258247, 0.029240921139717102, 0.009823179803788662, 0.02321154810488224, 0.014763198792934418, 0.009962797164916992, 0.007947158068418503, 0.04939187318086624, 0.00639538187533617, 0.008350536227226257, 0.006513583939522505, 0.007459635846316814, 0.006845461670309305, 0.030329804867506027, 0.00519750639796257, 0.005872479639947414, 0.005794969387352467, 0.006549259182065725, 0.005340784788131714, 0.0065691652707755566, 0.008159494958817959, 0.00478479964658618, 0.02461153455078602, 0.005273283924907446, 0.01937565766274929, 0.005119009874761105, 0.0063260565511882305, 0.02458001859486103, 0.005050888285040855, 0.00564216822385788, 0.004813380539417267, 0.007859678007662296, 0.004433478228747845, 0.0045313723385334015, 0.0046678208746016026, 0.00839057844132185, 0.004567686468362808, 0.004960917867720127, 0.0038394269067794085, 0.0065934788435697556, 0.009735888801515102, 0.003577281255275011, 0.004842607770115137, 0.00372963584959507, 0.006532303057610989, 0.0036754074972122908, 0.005544239189475775, 0.0032231996301561594, 0.005325618665665388, 0.01894174888730049, 0.004554578568786383, 0.007852141745388508, 0.0035935465712100267, 0.0066741351038217545, 0.003995883744210005, 0.007898703217506409, 0.0035464903339743614, 0.005859607830643654, 0.01394866406917572, 0.0037628652062267065, 0.005849919281899929, 0.004868640564382076, 0.025815457105636597, 0.004227865487337112, 0.006506395526230335, 0.009744416922330856, 0.0031092939898371696, 0.00462430901825428, 0.004919026046991348, 0.0035909225698560476, 0.006075049750506878, 0.011571128852665424, 0.003063779091462493, 0.005018569529056549, 0.006485930643975735, 0.005021579563617706, 0.006205745507031679, 0.009114537388086319, 0.003024383680894971, 0.005917186848819256, 0.007686389144510031, 0.00547855393961072, 0.006025360431522131, 0.007275475189089775, 0.0035383328795433044, 0.00401723850518465, 0.004204430151730776, 0.019289899617433548, 0.00453433720394969, 0.004768337123095989, 0.007730965036898851, 0.01482901070266962, 0.0070923627354204655, 0.004243456292897463, 0.005648510530591011, 0.007132579106837511, 0.006738562136888504, 0.005683308467268944, 0.004343888722360134, 0.007033516187220812, 0.0032470577862113714, 0.006099391262978315, 0.012942933477461338, 0.003887524828314781, 0.007615845650434494, 0.007969416677951813, 0.007275031879544258]


Top-k source tokens:

['self', 'users', 'self', 'User', 'u', 'User', 'sess', 'users', 'users', '#NEWLINE#']


Top-k attention probs:

[0.06092571094632149, 0.04939187318086624, 0.030329804867506027, 0.029240921139717102, 0.025815457105636597, 0.02461153455078602, 0.02458001859486103, 0.02321154810488224, 0.01937565766274929, 0.0193636491894722]
