
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "def test_thumbnail_if_set(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "'thumbnail_if_set() returns self.thumbnail if set, or else returns\\n        self.file'", "#NEWLINE#", "image", "=", "ImageAttachment", "(", "content_object", "=", "image", ".", "obj", ",", "creator", "=", "self", ".", "user", ")", "#NEWLINE#", "with", "open", "(", "'kitsune/upload/tests/media/test.jpg'", ")", "as", "f", ":", "#NEWLINE#", "#INDENT#", "up_file", "=", "File", "(", "f", ")", "#NEWLINE#", "image", ".", "file", ".", "save", "(", "up_file", ".", "name", ",", "up_file", ",", "save", "=", "True", ")", "#NEWLINE#", "#UNINDENT#", "eq_", "(", "image", ".", "file", ",", "image", ".", "thumbnail_if_set", "(", ")", ")", "#NEWLINE#", "generate_thumbnail", "(", "image", ",", "'file'", ",", "'thumbnail'", ")", "#NEWLINE#", "eq_", "(", "image", ".", "thumbnail", ",", "image", ".", "thumbnail_if_set", "(", ")", ")"], "error_location": [15], "repair_targets": [2, 21], "repair_candidates": [9, 15, 43, 63, 67, 76, 85, 89, 2, 21, 36, 49, 53, 32, 40], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "mozilla/kitsune/kitsune/upload/tests/test_models.py", "license": "bsd-3-clause", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 867, "results": {"model": "transformer", "prob": {"loc": [[0.0003160799969919026, 1.8013238678449284e-09, 8.982754984288022e-09, 4.138260914499092e-11, 3.4041828383957196e-11, 4.3833974644469365e-11, 2.970937731938683e-11, 4.837267739143947e-11, 2.4761590347588402e-11, 3.345488996941981e-09, 1.8574248042413366e-11, 1.8430652837242434e-11, 3.315053787034117e-11, 1.8899462550514556e-10, 4.9125252477022485e-11, 0.9995697140693665, 2.4518392871542005e-10, 4.346299709023782e-11, 1.8643780963500944e-11, 2.1310961675902185e-11, 1.4543238141540016e-11, 1.0934834335785126e-06, 4.7007439607504864e-11, 1.0851557152857794e-10, 7.810790209061835e-12, 6.521281344790131e-12, 1.2578535218618625e-12, 5.495681600770075e-12, 4.0813824542240695e-11, 2.424370426634681e-10, 5.481172373617005e-12, 6.78480188698316e-11, 4.765528527350682e-10, 2.2694358545183313e-11, 1.7623184161985606e-11, 9.365852711440414e-12, 3.6823479820924376e-09, 2.0545353612844153e-11, 1.8095660386796553e-11, 4.8820648912428766e-11, 3.052353349630721e-06, 6.587315415362838e-11, 6.561209214828168e-11, 2.0746124818060707e-09, 4.924326918454014e-11, 4.6734147801652526e-11, 7.289519682318613e-11, 1.8126783060679053e-11, 2.2380955422285354e-10, 5.289248292683624e-05, 3.883920962621801e-10, 1.8532536616433504e-10, 1.229382290413028e-10, 4.789538070326671e-05, 2.916954872089761e-11, 3.297245462774434e-11, 2.2848861691571187e-10, 4.4879139293740877e-10, 2.8802233167923852e-11, 7.438299282069849e-11, 3.1050287341294336e-11, 1.8961947897272458e-12, 1.0808401049167138e-11, 3.286811988800764e-06, 5.668214231313584e-10, 6.562864696135762e-10, 6.684316294913728e-11, 1.8177385152640113e-09, 3.4646521762660143e-10, 7.483438174693546e-11, 8.217122982046021e-09, 2.1297888452842528e-10, 1.1421462386973502e-10, 5.700227095895016e-11, 5.027862154394214e-11, 1.5832491567779883e-11, 3.144689571854542e-06, 1.5605185199607519e-10, 4.402841646822253e-09, 1.7775342309178654e-10, 6.80403733355206e-10, 3.9337436086306354e-11, 4.278982376759721e-11, 9.209557595701856e-12, 2.171586868660036e-11, 2.748628958215704e-06, 2.7207283648245095e-10, 1.1282462741846189e-09, 3.822596059133154e-11, 2.453468761487443e-09, 1.535519350559511e-10, 3.0624048436012075e-11, 2.2985076064685472e-09, 1.381277731082875e-10, 6.67412514143706e-11]], "pointer": [[0.0, 0.0, 0.10989604145288467, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0005629117367789149, 0.0, 0.0, 0.0, 0.0, 0.0, 2.479798979493353e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8889799118041992, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00023665264598093927, 0.0, 0.0, 0.0, 5.275526564219035e-05, 0.0, 0.0, 0.0, 0.0002184496115660295, 0.0, 0.0, 9.226140718965326e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 7.904656740720384e-06, 0.0, 0.0, 0.0, 1.1360139069438446e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 7.00014015819761e-06, 0.0, 0.0, 0.0, 1.1096355592599139e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.9888846054527676e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 8.15534804132767e-07, 0.0, 0.0, 0.0, 3.5676480365509633e-06, 0.0, 0.0, 0.0, 0.0, 0.0]], "target": [0.9988759756088257]}, "loss": [0.0004303721070755273, 0.0011246565263718367], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', 'def test_thumbnail_if_set(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', "'thumbnail_if_set() returns self.thumbnail if set, or else returns\\n        self.file'", '#NEWLINE#', 'image', '=', 'ImageAttachment', '(', 'content_object', '=', 'image', '.', 'obj', ',', 'creator', '=', 'self', '.', 'user', ')', '#NEWLINE#', 'with', 'open', '(', "'kitsune/upload/tests/media/test.jpg'", ')', 'as', 'f', ':', '#NEWLINE#', '#INDENT#', 'up_file', '=', 'File', '(', 'f', ')', '#NEWLINE#', 'image', '.', 'file', '.', 'save', '(', 'up_file', '.', 'name', ',', 'up_file', ',', 'save', '=', 'True', ')', '#NEWLINE#', '#UNINDENT#', 'eq_', '(', 'image', '.', 'file', ',', 'image', '.', 'thumbnail_if_set', '(', ')', ')', '#NEWLINE#', 'generate_thumbnail', '(', 'image', ',', "'file'", ',', "'thumbnail'", ')', '#NEWLINE#', 'eq_', '(', 'image', '.', 'thumbnail', ',', 'image', '.', 'thumbnail_if_set', '(', ')', ')']


All attention probs:

[0.016557076945900917, 0.011591648682951927, 0.06353630870580673, 0.015213672071695328, 0.011135349050164223, 0.011817242950201035, 0.010304980911314487, 0.014216761104762554, 0.010791844688355923, 0.024283893406391144, 0.012098702602088451, 0.011225247755646706, 0.009862269274890423, 0.013587471097707748, 0.008554463274776936, 0.047818124294281006, 0.006677280180156231, 0.008185380138456821, 0.006596533115953207, 0.010620390065014362, 0.006488649640232325, 0.03140841796994209, 0.0053610117174685, 0.005619344301521778, 0.005736981984227896, 0.007595137692987919, 0.005538537632673979, 0.008420027792453766, 0.005710455123335123, 0.009733467362821102, 0.006760607939213514, 0.007486333139240742, 0.016079111024737358, 0.006875458639115095, 0.006894372869282961, 0.007361300755292177, 0.023864267393946648, 0.00712068285793066, 0.007542154286056757, 0.006165003404021263, 0.026617765426635742, 0.004513712599873543, 0.010082733817398548, 0.014905662275850773, 0.003975154832005501, 0.006404414307326078, 0.0050339833833277225, 0.0044721937738358974, 0.006123776081949472, 0.025303516536951065, 0.00451682461425662, 0.005705623887479305, 0.003985656891018152, 0.029764818027615547, 0.0045223901979625225, 0.008929084986448288, 0.005031744483858347, 0.007375830318778753, 0.004194775130599737, 0.006402087397873402, 0.0063704438507556915, 0.008559098467230797, 0.0061011589132249355, 0.023592647165060043, 0.005846976302564144, 0.00603282917290926, 0.008754859678447247, 0.011925176717340946, 0.005051026586443186, 0.005174349527806044, 0.00809717271476984, 0.006048237439244986, 0.004792424384504557, 0.007940515875816345, 0.012538846582174301, 0.0064358217641711235, 0.02695636823773384, 0.0048803347162902355, 0.010254314169287682, 0.004436638671904802, 0.006890867371112108, 0.0039448970928788185, 0.007546138949692249, 0.010587743483483791, 0.00671220850199461, 0.021470025181770325, 0.004975869320333004, 0.008209479041397572, 0.00677634309977293, 0.01257424894720316, 0.004344420041888952, 0.0058328378945589066, 0.007591868285089731, 0.005980871617794037, 0.006475240457803011]


Top-k source tokens:

['self', 'image', 'self', 'up_file', 'image', 'f', 'up_file', 'image', 'up_file', 'image']


Top-k attention probs:

[0.06353630870580673, 0.047818124294281006, 0.03140841796994209, 0.029764818027615547, 0.02695636823773384, 0.026617765426635742, 0.025303516536951065, 0.024283893406391144, 0.023864267393946648, 0.023592647165060043]
