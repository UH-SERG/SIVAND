
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "@", "defer", ".", "inlineCallbacks", "#NEWLINE#", "def count_daily_users(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "'\\n        Counts the number of users who used this homeserver in the last 24 hours.\\n        '", "#NEWLINE#", "def _count_users(", "txn", ")", ":", "#NEWLINE#", "#INDENT#", "txn", ".", "execute", "(", "'SELECT COUNT(DISTINCT user_id) AS users FROM user_ips WHERE last_seen > ?'", ",", "(", "(", "int", "(", "self", ".", "_clock", ".", "time_msec", "(", ")", ")", "-", "(", "(", "(", "1000", "*", "60", ")", "*", "60", ")", "*", "24", ")", ")", ",", ")", ")", "#NEWLINE#", "rows", "=", "self", ".", "cursor_to_dict", "(", "txn", ")", "#NEWLINE#", "if", "rows", ":", "#NEWLINE#", "#INDENT#", "return", "rows", "[", "0", "]", "[", "'users'", "]", "#NEWLINE#", "#UNINDENT#", "return", "0", "#NEWLINE#", "#UNINDENT#", "ret", "=", "(", "yield", "self", ".", "runInteraction", "(", "'count_users'", ",", "_count_users", ")", ")", "#NEWLINE#", "defer", ".", "returnValue", "(", "self", ")"], "error_location": [103], "repair_targets": [85], "repair_candidates": [7, 30, 59, 89, 103, 85, 95], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "matrix-org/synapse/synapse/storage/__init__.py", "license": "apache-2.0", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 2571, "results": {"model": "transformer", "prob": {"loc": [[2.043750646407716e-05, 1.3917589303247269e-09, 2.947092569982601e-11, 3.159610420522263e-11, 5.68901904751673e-11, 2.631357111371191e-11, 1.5655363116984233e-10, 3.02735808643817e-10, 4.9545389492478e-12, 1.0175286828395524e-11, 1.0487638535394694e-11, 9.136512726937163e-12, 3.4078410232618594e-11, 1.3766454989849741e-11, 2.0979728371228745e-11, 7.066354168472344e-10, 3.2680362322540235e-12, 1.1531518795404594e-11, 1.3117664940387463e-11, 8.934318562747734e-12, 3.31383392948581e-11, 1.2390358704317261e-11, 1.7346564462616954e-10, 9.872621470341514e-11, 1.4903105138852624e-10, 8.507934808055229e-12, 2.072000904185245e-11, 5.976180661448893e-11, 1.8341170249236427e-10, 9.062806061166384e-11, 7.56735285545318e-10, 2.6951659654050886e-11, 4.056602276314436e-11, 2.1773895186871783e-11, 9.233867143132457e-12, 2.2616160333388535e-10, 1.1367262686690083e-10, 2.986759927922633e-12, 1.638327841446685e-11, 9.26375122445311e-12, 6.157329507372467e-11, 2.269697069179344e-10, 1.0969202213217955e-09, 9.757378238717251e-11, 4.3733372478982346e-10, 2.71684341690559e-11, 2.428386484953915e-11, 2.3198017118364334e-10, 1.7467341809074277e-11, 1.7067529681225047e-11, 2.9267038792468725e-10, 6.86027692986535e-11, 1.8297901388519833e-11, 2.926077782849923e-11, 3.967078054945006e-11, 1.9856200017542847e-11, 1.9147348637171824e-11, 1.0585662346684899e-09, 2.5181485369119017e-11, 5.37872246741955e-10, 3.357837272122133e-11, 8.188527980679261e-12, 1.3929904452147923e-10, 8.789378966866934e-07, 9.830192909676683e-11, 7.442216981567995e-11, 7.168941829061026e-11, 4.9928316911973525e-06, 3.4373759394412673e-10, 2.0975578218784818e-10, 1.1554995155149683e-10, 1.3831251248486165e-11, 2.4014953581286136e-08, 5.649984369249239e-10, 3.0379201931829414e-10, 8.082410435372722e-11, 5.705016459245371e-10, 1.2097347568129635e-09, 1.5337690839611895e-10, 1.4021174499223577e-10, 1.7300635923866992e-10, 1.4419644644991791e-10, 6.87608618932245e-08, 3.84985432422269e-10, 4.381753571092162e-10, 8.003720353144672e-09, 1.58470334077343e-10, 2.0579526971431505e-10, 9.330529238127383e-09, 1.3018177646983986e-09, 1.6343462694301536e-10, 3.1823998297708656e-11, 6.986760059390917e-10, 3.9830024434195366e-06, 9.177606230537094e-09, 6.19783386355266e-05, 3.76116418010497e-08, 1.1067139205067633e-08, 4.756024463148378e-09, 8.626735437111677e-11, 7.479761254813866e-10, 1.7196609414238395e-10, 6.70286182113955e-09, 0.999907374382019, 1.4547293858413468e-07]], "pointer": [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.49127964480067e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.1155955270680806e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 6.2990581639610355e-09, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.9999544620513916, 0.0, 0.0, 0.0, 1.1933033228217482e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 4.5115637476556e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9.079476370743578e-08, 0.0]], "target": [0.9999544620513916]}, "loss": [9.262132516596466e-05, 4.553898543235846e-05], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', '@', 'defer', '.', 'inlineCallbacks', '#NEWLINE#', 'def count_daily_users(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', "'\\n        Counts the number of users who used this homeserver in the last 24 hours.\\n        '", '#NEWLINE#', 'def _count_users(', 'txn', ')', ':', '#NEWLINE#', '#INDENT#', 'txn', '.', 'execute', '(', "'SELECT COUNT(DISTINCT user_id) AS users FROM user_ips WHERE last_seen > ?'", ',', '(', '(', 'int', '(', 'self', '.', '_clock', '.', 'time_msec', '(', ')', ')', '-', '(', '(', '(', '1000', '*', '60', ')', '*', '60', ')', '*', '24', ')', ')', ',', ')', ')', '#NEWLINE#', 'rows', '=', 'self', '.', 'cursor_to_dict', '(', 'txn', ')', '#NEWLINE#', 'if', 'rows', ':', '#NEWLINE#', '#INDENT#', 'return', 'rows', '[', '0', ']', '[', "'users'", ']', '#NEWLINE#', '#UNINDENT#', 'return', '0', '#NEWLINE#', '#UNINDENT#', 'ret', '=', '(', 'yield', 'self', '.', 'runInteraction', '(', "'count_users'", ',', '_count_users', ')', ')', '#NEWLINE#', 'defer', '.', 'returnValue', '(', 'self', ')']


All attention probs:

[0.017339976504445076, 0.009861212223768234, 0.01691192388534546, 0.014195929281413555, 0.009365820325911045, 0.011560892686247826, 0.015529366210103035, 0.04307527095079422, 0.012904183939099312, 0.010662269778549671, 0.011580380611121655, 0.011189298704266548, 0.01284025702625513, 0.010017704218626022, 0.010816758498549461, 0.029293810948729515, 0.010581694543361664, 0.00878679845482111, 0.00916446652263403, 0.00909189973026514, 0.02023741975426674, 0.005436240695416927, 0.006779228802770376, 0.006912474986165762, 0.006167130544781685, 0.005419239867478609, 0.0043738530948758125, 0.004150189459323883, 0.0061068725772202015, 0.004856365732848644, 0.019529618322849274, 0.003973703365772963, 0.004651949740946293, 0.004000316374003887, 0.005142986308783293, 0.005758300423622131, 0.00548198539763689, 0.004936377052217722, 0.005517686251550913, 0.004740947391837835, 0.004041092004626989, 0.005127194803208113, 0.0081187654286623, 0.00545431999489665, 0.006534826010465622, 0.004354724194854498, 0.004789651371538639, 0.006347712129354477, 0.004097930155694485, 0.005081063136458397, 0.006981978192925453, 0.0042816102504730225, 0.00393688352778554, 0.004282869398593903, 0.004686368629336357, 0.004315883386880159, 0.006089555099606514, 0.02410103939473629, 0.005103009287267923, 0.014696024358272552, 0.003428239608183503, 0.004236260894685984, 0.004438595846295357, 0.025004738941788673, 0.004659888334572315, 0.006437357515096664, 0.007661154959350824, 0.026712169870734215, 0.005360618233680725, 0.0056677390821278095, 0.005536282900720835, 0.007361376658082008, 0.017356527969241142, 0.004839958623051643, 0.005374239291995764, 0.004065526649355888, 0.004193578846752644, 0.005662339739501476, 0.0031027207151055336, 0.005394634325057268, 0.00496346689760685, 0.005964099429547787, 0.006927597802132368, 0.005243554711341858, 0.005562672391533852, 0.03891626372933388, 0.005536010023206472, 0.00552985817193985, 0.005712991114705801, 0.01425031665712595, 0.002997733885422349, 0.0039012781344354153, 0.004381556063890457, 0.012196003459393978, 0.005478013306856155, 0.019227130338549614, 0.005912261549383402, 0.006588937249034643, 0.011523708701133728, 0.015132976695895195, 0.005355512723326683, 0.007196975871920586, 0.0093784024938941, 0.07544363290071487, 0.00881978776305914]


Top-k source tokens:

['self', 'self', 'ret', 'txn', 'rows', 'txn', 'rows', 'txn', 'self', '_count_users']


Top-k attention probs:

[0.07544363290071487, 0.04307527095079422, 0.03891626372933388, 0.029293810948729515, 0.026712169870734215, 0.025004738941788673, 0.02410103939473629, 0.02023741975426674, 0.019529618322849274, 0.019227130338549614]
