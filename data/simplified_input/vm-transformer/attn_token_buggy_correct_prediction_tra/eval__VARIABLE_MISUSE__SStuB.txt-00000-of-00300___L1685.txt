
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "@", "pytest", ".", "mark", ".", "xfail", "#NEWLINE#", "def test_alter_primary_key_change_order2(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "'Change primary key'", "#NEWLINE#", "stmts", "=", "[", "'CREATE TABLE t1 (c1 INTEGER, c2 INTEGER PRIMARY KEY)'", "]", "#NEWLINE#", "inmap", "=", "self", ".", "std_map", "(", ")", "#NEWLINE#", "inmap", "[", "'schema public'", "]", ".", "update", "(", "{", "#NEWLINE#", "#INDENT#", "'table t1'", ":", "{", "#NEWLINE#", "#INDENT#", "'columns'", ":", "[", "{", "#NEWLINE#", "#INDENT#", "'c1'", ":", "{", "#NEWLINE#", "#INDENT#", "'type'", ":", "'integer'", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "{", "#NEWLINE#", "#INDENT#", "'cN'", ":", "{", "#NEWLINE#", "#INDENT#", "'type'", ":", "'text'", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "{", "#NEWLINE#", "#INDENT#", "'c2'", ":", "{", "#NEWLINE#", "#INDENT#", "'type'", ":", "'integer'", ",", "#NEWLINE#", "'not_null'", ":", "True", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", "]", ",", "#NEWLINE#", "'primary_key'", ":", "{", "#NEWLINE#", "#INDENT#", "'t1_pkey'", ":", "{", "#NEWLINE#", "#INDENT#", "'columns'", ":", "[", "'c2'", "]", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", ")", "#NEWLINE#", "sql", "=", "self", ".", "to_sql", "(", "sql", ",", "stmts", ")", "#NEWLINE#", "self", ".", "assertEqual", "(", "len", "(", "sql", ")", ",", "1", ")", "#NEWLINE#", "self", ".", "assertEqual", "(", "fix_indent", "(", "sql", "[", "0", "]", ")", ",", "'ALTER TABLE t1 ADD COLUMN cN text'", ")"], "error_location": [154], "repair_targets": [22, 30], "repair_candidates": [22, 30, 9, 24, 150, 159, 171, 16, 156, 148, 154, 165, 177], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "perseas/Pyrseas/tests/dbobject/test_constraint.py", "license": "bsd-3-clause", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 1685, "results": {"model": "transformer", "prob": {"loc": [[0.00021860665583517402, 2.5103452649943847e-09, 2.2669801799657385e-11, 3.307735682578361e-11, 1.7250295636372925e-10, 5.05791346305795e-11, 9.457138197555004e-12, 4.727803218362858e-11, 1.1684445945514543e-11, 9.637678433094266e-10, 3.4313671695707093e-12, 3.5117416787022737e-12, 3.9917917062093355e-12, 5.6674231280196e-12, 1.0797259787642677e-11, 7.650755029509071e-12, 1.1816803091591055e-09, 1.951215924944627e-11, 3.5222633143483506e-10, 1.1491897711213284e-10, 2.339829718867037e-11, 1.6314062947775376e-11, 3.576941631777686e-09, 1.415929179460207e-10, 3.716819074739419e-10, 2.0286649096701304e-11, 7.854743331453529e-13, 7.643917443456161e-11, 2.1502108427107203e-10, 4.702585196247888e-11, 2.6656525875523585e-08, 1.39640687901732e-10, 2.976233925977567e-09, 1.7052544099005473e-10, 7.675036300947014e-11, 2.1626228585702734e-11, 1.1307806913052332e-09, 4.662684460754463e-09, 4.524418339979519e-10, 1.132433313788539e-10, 4.515073870337005e-10, 4.717662371866993e-10, 8.405924289967004e-10, 4.308888523762988e-10, 2.1725339582889802e-10, 1.291096451971896e-09, 2.345375837986552e-10, 2.5331581277043824e-09, 3.5819662791425344e-09, 1.0930568672407048e-09, 3.829876971117585e-10, 9.3380592147696e-10, 1.5397612351808476e-10, 1.8226384845831944e-09, 3.9088793313268866e-10, 2.626786566040096e-10, 8.032824405646011e-10, 1.922084019723158e-10, 3.1985631920861124e-08, 4.2209072348420307e-10, 3.555492844586894e-10, 2.2128578136548782e-10, 1.2774908908497196e-10, 2.23399437837557e-10, 1.707379654325436e-10, 1.456338244443245e-10, 9.688414653874489e-11, 2.6383151219278034e-10, 9.5365770835798e-10, 1.5507428674510493e-10, 1.2168414886826184e-10, 8.558206920916689e-10, 3.3575969782262405e-10, 1.3764164252805244e-09, 2.791451791939181e-10, 2.2153495704557713e-10, 1.953757600148265e-09, 2.1977449027321683e-10, 5.103554912011532e-08, 1.1140481870342e-09, 9.761538244390522e-10, 5.568166483449488e-10, 5.555743642915445e-10, 2.3950122440830057e-10, 2.968884582621456e-10, 2.2065063665088758e-10, 1.4823704763688994e-10, 2.4642793361451254e-10, 2.036610879940781e-09, 3.282303040474943e-10, 2.3549595606908724e-10, 1.104358715586784e-09, 2.6804503061583773e-10, 2.292235290468625e-09, 3.9733444312517463e-10, 3.502280132572366e-10, 1.4086514177336085e-09, 1.6920809198239795e-10, 5.39976134916742e-08, 6.901507143552976e-10, 6.810273456281379e-10, 2.932488973872438e-10, 9.465521699780766e-10, 2.0955654989052164e-08, 1.12864306789362e-09, 9.866418793080811e-10, 3.128079184566701e-10, 3.039498375212446e-10, 2.223545098045676e-10, 2.759640849170353e-10, 2.8230154325292744e-10, 2.3169728635696885e-10, 2.2704559066166752e-10, 3.566965334211858e-10, 1.971083157803477e-10, 3.4779710222920812e-09, 2.595841874786231e-10, 1.6332137864338847e-09, 2.5177379625596075e-10, 1.4452473939829957e-10, 1.0919712911672264e-09, 1.4242092227778613e-10, 1.248527059516391e-09, 3.1113703280460925e-10, 1.9523598016046861e-10, 1.1286387380238239e-09, 1.1455329740339693e-10, 2.137230170617954e-09, 1.8558635517251787e-08, 3.237887180596033e-10, 7.900160525764477e-10, 3.0461200228870666e-10, 1.5393560037768594e-10, 8.467277573531717e-11, 1.1369435948260787e-10, 1.4720104302146098e-10, 1.3834564049908238e-10, 1.0345870687933356e-10, 6.579095601644269e-11, 8.933782880138352e-11, 6.841530120205164e-11, 8.092148479077466e-11, 6.24247389890975e-11, 8.141503443637177e-11, 6.680420105986684e-11, 8.251593852648398e-11, 7.691008940824418e-11, 1.2567835661059235e-10, 6.182357736861377e-09, 8.206391122200785e-11, 1.4199840192574698e-09, 8.984687993596197e-11, 1.398130396179642e-11, 1.1243415087847097e-09, 0.9997476935386658, 1.3642003082736665e-09, 2.112584661517758e-05, 4.937765751833467e-09, 2.6751847959083364e-10, 9.158174218981685e-11, 7.031760590470171e-11, 1.1954168557815059e-11, 6.860267909303275e-11, 1.7882062497420748e-10, 6.063424207169987e-10, 5.288305601425236e-06, 4.224177396761064e-10, 4.148594523467608e-10, 1.226087192662817e-06, 5.914069789447751e-10, 1.6911355649185111e-10, 1.4049023056017518e-10, 8.68762006778212e-11, 1.820617788472756e-11, 1.337400329370908e-10, 4.855844615292426e-10, 3.1328988292500526e-09, 5.702795533579774e-06, 3.4786808988940265e-09, 3.7707412303689125e-08, 6.704178878713662e-10, 5.156120530536157e-10, 4.2043396542013056e-10, 1.3066600246247617e-08, 6.378627626091316e-10]], "pointer": [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.098177086575561e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0015638513723388314, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4101043939590454, 0.0, 7.471044227713719e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5883212089538574, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 6.654165645159082e-07, 0.0, 1.3475829518938554e-07, 0.0, 0.0, 0.0, 3.478668375578309e-08, 0.0, 9.500030500930734e-06, 0.0, 0.0, 1.5971160394201434e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 3.157688155397409e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 1.510539426874402e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 1.977022456856048e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], "target": [0.9984256029129028]}, "loss": [0.00025233422638848424, 0.0015756377251818776], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', '@', 'pytest', '.', 'mark', '.', 'xfail', '#NEWLINE#', 'def test_alter_primary_key_change_order2(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', "'Change primary key'", '#NEWLINE#', 'stmts', '=', '[', "'CREATE TABLE t1 (c1 INTEGER, c2 INTEGER PRIMARY KEY)'", ']', '#NEWLINE#', 'inmap', '=', 'self', '.', 'std_map', '(', ')', '#NEWLINE#', 'inmap', '[', "'schema public'", ']', '.', 'update', '(', '{', '#NEWLINE#', '#INDENT#', "'table t1'", ':', '{', '#NEWLINE#', '#INDENT#', "'columns'", ':', '[', '{', '#NEWLINE#', '#INDENT#', "'c1'", ':', '{', '#NEWLINE#', '#INDENT#', "'type'", ':', "'integer'", ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '{', '#NEWLINE#', '#INDENT#', "'cN'", ':', '{', '#NEWLINE#', '#INDENT#', "'type'", ':', "'text'", ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '{', '#NEWLINE#', '#INDENT#', "'c2'", ':', '{', '#NEWLINE#', '#INDENT#', "'type'", ':', "'integer'", ',', '#NEWLINE#', "'not_null'", ':', 'True', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ']', ',', '#NEWLINE#', "'primary_key'", ':', '{', '#NEWLINE#', '#INDENT#', "'t1_pkey'", ':', '{', '#NEWLINE#', '#INDENT#', "'columns'", ':', '[', "'c2'", ']', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ')', '#NEWLINE#', 'sql', '=', 'self', '.', 'to_sql', '(', 'sql', ',', 'stmts', ')', '#NEWLINE#', 'self', '.', 'assertEqual', '(', 'len', '(', 'sql', ')', ',', '1', ')', '#NEWLINE#', 'self', '.', 'assertEqual', '(', 'fix_indent', '(', 'sql', '[', '0', ']', ')', ',', "'ALTER TABLE t1 ADD COLUMN cN text'", ')']


All attention probs:

[0.01060382928699255, 0.00880375225096941, 0.013307892717421055, 0.01130121760070324, 0.007677720859646797, 0.007666292134672403, 0.006704680155962706, 0.006223978940397501, 0.007394776679575443, 0.03764365240931511, 0.008137780241668224, 0.007372058928012848, 0.006747620180249214, 0.006562788039445877, 0.005816274788230658, 0.007436817511916161, 0.0227798018604517, 0.007664916105568409, 0.0055479626171290874, 0.006011649500578642, 0.005452217999845743, 0.0058694202452898026, 0.02196807786822319, 0.004687964450567961, 0.011882061138749123, 0.0031927735544741154, 0.0025682372506707907, 0.0037982366047799587, 0.00359031418338418, 0.004669002257287502, 0.03084336780011654, 0.004322846420109272, 0.005062065552920103, 0.00452436925843358, 0.0028146421536803246, 0.003660509129986167, 0.0037009171210229397, 0.004016159567981958, 0.004711681976914406, 0.004355570301413536, 0.006016166880726814, 0.003399850567802787, 0.004444835241883993, 0.003942197188735008, 0.003346480196341872, 0.003991333767771721, 0.004015284590423107, 0.0027435061056166887, 0.003203015308827162, 0.0036470824852585793, 0.0033049588091671467, 0.002989453263580799, 0.002858721651136875, 0.0027037826366722584, 0.002714087488129735, 0.002744152210652828, 0.00348300626501441, 0.002733576111495495, 0.0036059997510164976, 0.0024692926090210676, 0.00296614458784461, 0.003117052838206291, 0.004074363969266415, 0.0027869276236742735, 0.003507580142468214, 0.003866027807816863, 0.0065577165223658085, 0.003728399286046624, 0.0038121177349239588, 0.0039232452400028706, 0.0035829467233270407, 0.005255995783954859, 0.0027670408599078655, 0.0025096654426306486, 0.002928619971498847, 0.0026690613012760878, 0.0034321944694966078, 0.003167354268953204, 0.003502300474792719, 0.002162601100280881, 0.0031437883153557777, 0.0032111373730003834, 0.003542848862707615, 0.0026492381002753973, 0.003443870460614562, 0.0036833500489592552, 0.006017543375492096, 0.0036825279239565134, 0.0035847530234605074, 0.0031992599833756685, 0.003043818287551403, 0.004758603870868683, 0.0026418745983392, 0.002390108769759536, 0.002555076964199543, 0.0027868233155459166, 0.004124687518924475, 0.003131028264760971, 0.003839083481580019, 0.002354200929403305, 0.0033261070493608713, 0.004861622583121061, 0.003122804220765829, 0.00441503431648016, 0.0028013165574520826, 0.00350843439809978, 0.0033564893528819084, 0.004047207068651915, 0.002521103248000145, 0.003555739065632224, 0.004022170323878527, 0.005600804463028908, 0.0034667737782001495, 0.002311153570190072, 0.0033727989066392183, 0.0045638554729521275, 0.0025305920280516148, 0.0024601467885077, 0.0028632315807044506, 0.003023093566298485, 0.005042313132435083, 0.003246696898713708, 0.002954978495836258, 0.003213759046047926, 0.003495106939226389, 0.004134764429181814, 0.004137792624533176, 0.0031593425665050745, 0.0042301323264837265, 0.002464825287461281, 0.002163263503462076, 0.003913543652743101, 0.0038546225987374783, 0.004388808272778988, 0.0026200541760772467, 0.003801546758040786, 0.0035945933777838945, 0.00392010947689414, 0.0026506506837904453, 0.0038312412798404694, 0.0038463540840893984, 0.004445247817784548, 0.0026844635140150785, 0.003832010319456458, 0.0036586306523531675, 0.0032038099598139524, 0.002708693500608206, 0.003950837068259716, 0.022763587534427643, 0.00485089560970664, 0.008420253172516823, 0.0031968809198588133, 0.0032039096113294363, 0.005160522647202015, 0.06599250435829163, 0.007828113622963428, 0.028177112340927124, 0.0038442586082965136, 0.0051448955200612545, 0.01134826336055994, 0.002417484298348427, 0.0031376772094517946, 0.003264665836468339, 0.003196578472852707, 0.0033569924999028444, 0.016060253605246544, 0.0023546048905700445, 0.0026811216957867146, 0.007717789150774479, 0.0023292892146855593, 0.004162492696195841, 0.00967799499630928, 0.001987307332456112, 0.003507141722366214, 0.003775428980588913, 0.004003864713013172, 0.0036952232476323843, 0.014461305923759937, 0.0035665330942720175, 0.005252229981124401, 0.003274897113442421, 0.00284340581856668, 0.0031905886717140675, 0.003786597866564989, 0.003935001790523529]


Top-k source tokens:

['sql', 'self', 'inmap', 'stmts', 'stmts', 'sql', 'inmap', 'sql', 'sql', 'pytest']


Top-k attention probs:

[0.06599250435829163, 0.03764365240931511, 0.03084336780011654, 0.028177112340927124, 0.0227798018604517, 0.022763587534427643, 0.02196807786822319, 0.016060253605246544, 0.014461305923759937, 0.013307892717421055]
