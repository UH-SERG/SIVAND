
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "def get(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "state", "=", "''", "#NEWLINE#", "if", "(", "'orig_url'", "in", "request", ".", "args", ")", ":", "#NEWLINE#", "#INDENT#", "state", "=", "base64", ".", "urlsafe_b64encode", "(", "request", ".", "args", "[", "'orig_url'", "]", ".", "encode", "(", "'utf-8'", ")", ")", "#NEWLINE#", "#UNINDENT#", "if", "(", "(", "'refresh_token'", "in", "request", ".", "cookies", ")", "and", "(", "'refresh_email'", "in", "request", ".", "cookies", ")", ")", ":", "#NEWLINE#", "#INDENT#", "resp", "=", "auth_with_refresh_token", "(", "request", ".", "cookies", ")", "#NEWLINE#", "email", "=", "Fernet", "(", "current_app", ".", "config", "[", "'COOKIE_ENCRYPTION_KEY'", "]", ")", ".", "decrypt", "(", "str", "(", "request", ".", "cookies", "[", "'refresh_email'", "]", ")", ")", "#NEWLINE#", "set_session_state", "(", "access_token", "=", "resp", "[", "'access_token'", "]", ",", "email", "=", "email", ")", "#NEWLINE#", "return", "get_orig_url_redirect", "(", "state", ")", "#NEWLINE#", "#UNINDENT#", "redirect_uri", "=", "url_for", "(", "auth_uri", ".", "authorized_url", ",", "_external", "=", "True", ")", "#NEWLINE#", "flow", "=", "get_auth_flow", "(", "redirect_uri", "=", "redirect_uri", ",", "state", "=", "state", ")", "#NEWLINE#", "auth_uri", "=", "flow", ".", "step1_get_authorize_url", "(", ")", "#NEWLINE#", "return", "redirect", "(", "auth_uri", ")"], "error_location": [122], "repair_targets": [2], "repair_candidates": [131, 146, 63, 101, 7, 22, 114, 139, 141, 122, 144, 155, 72, 106, 108, 118, 135, 137, 2], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "dropbox/changes/changes/web/auth.py", "license": "apache-2.0", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00001-of-00300", "js_count": 3445, "results": {"model": "transformer", "prob": {"loc": [[0.00421510636806488, 1.208874422786721e-08, 1.634569457564794e-07, 3.687222749348962e-10, 5.191770346968383e-10, 3.7507785766166535e-10, 2.6126284469185634e-10, 6.4481420203321704e-09, 5.16458986687951e-10, 1.2107014280005046e-09, 2.199055243456982e-10, 2.795311759840047e-10, 1.1909176977908942e-09, 3.096126732771154e-08, 2.527422271469959e-09, 1.1164156887844001e-07, 1.963551321537693e-09, 2.34192720771631e-10, 3.720851404764858e-10, 3.708480744712972e-10, 1.4739504061722641e-10, 9.89042736598833e-11, 4.159917565971227e-08, 8.189109390599469e-10, 1.5149781429357745e-09, 7.331463769411073e-10, 1.558929513256757e-10, 1.3221639338922841e-09, 9.095684561089001e-08, 2.0646169218707655e-09, 4.1334966005557305e-10, 8.953959795832134e-10, 2.1098491842508338e-08, 3.246585222882459e-10, 1.7082738001938935e-10, 3.9114117500460566e-10, 4.930740260533639e-09, 8.918817684389069e-09, 2.311573377156151e-09, 1.36795108574006e-09, 5.33276200975763e-10, 7.480771002654762e-10, 2.2811852407045308e-09, 5.39500444318719e-10, 2.5091699829005165e-09, 1.122410040466093e-07, 8.929932349133196e-09, 1.3415090904800309e-07, 8.596010125927478e-09, 3.0671054584985313e-10, 4.315670598664667e-10, 2.163567769386532e-09, 3.115668389952475e-09, 3.4421849814947336e-09, 4.311525803046834e-09, 7.821940073426958e-08, 4.9516439837304915e-09, 3.7946581987746697e-10, 3.6857461527262103e-10, 6.128424989704229e-10, 2.9402948964474263e-09, 6.842492128456001e-10, 6.255426732160174e-10, 2.8825734688098237e-08, 7.014490654988492e-10, 2.0852040094609947e-09, 2.223467632234133e-09, 3.606488405694108e-07, 3.949165439109947e-09, 5.254893187256471e-10, 1.9429862163633516e-09, 2.043749613989121e-09, 1.1122308762878674e-07, 2.961028089387696e-09, 4.057904678944624e-09, 2.8674975727227547e-09, 7.276412361534312e-07, 7.131590873399318e-09, 1.2543187599689531e-09, 2.552361433316719e-09, 1.0574523479078834e-08, 3.82123577225002e-09, 2.189246561812297e-09, 4.0337901907605556e-09, 2.2445896252776265e-09, 2.686519673389398e-09, 5.915759437868928e-09, 3.5887691041125436e-08, 1.0764242688310333e-06, 9.119948352065421e-09, 8.795222328217278e-10, 1.9114481109028247e-09, 2.7720540529685422e-08, 6.529840224089867e-09, 1.909874747241247e-08, 7.013758018814542e-09, 6.631620586006193e-09, 4.566604161482246e-07, 3.205557597141251e-09, 4.748997525894083e-05, 9.355758834317385e-09, 1.7937396478373557e-05, 1.478101729901482e-08, 5.5690165368105227e-08, 3.251501290435499e-09, 2.381205010948406e-09, 1.771209290346576e-09, 3.1955829093988086e-09, 1.4375235650732066e-06, 9.848345250418333e-09, 7.26365412262453e-09, 9.032520287277634e-10, 4.214896431875559e-09, 8.568150633436744e-09, 0.0002201844472438097, 9.211694518285185e-09, 1.112792613611191e-08, 4.065147773957278e-09, 2.7120675483160994e-08, 2.868502657626948e-10, 7.805869728372272e-09, 8.360207637281292e-09, 0.9954256415367126, 1.2599638665733437e-08, 5.511231471189149e-10, 2.9311006954912955e-09, 9.465964678767591e-10, 4.9932222800919135e-09, 2.1091602775413776e-07, 6.264337049088908e-09, 5.359276133987123e-09, 8.660592243359133e-08, 6.701014743093481e-10, 9.854471016979005e-09, 1.741196853366489e-09, 2.4098177675568877e-08, 5.221924226361807e-09, 5.888151690669474e-07, 1.2877087174345547e-09, 4.6529167185838105e-09, 1.5390059227016195e-09, 1.9203080228180625e-05, 8.665841377819561e-09, 4.6589381241801675e-09, 8.40701108728581e-09, 2.3848924612934752e-08, 5.080103164800676e-07, 3.5393001862615847e-09, 2.0875390305263863e-10, 1.0663809746347397e-07, 2.4777826013178128e-08, 5.741027653272113e-09, 8.26674562137697e-10, 6.27909613193367e-10, 8.403836737613801e-09, 4.7389174142153934e-05, 9.13446651651384e-09]], "pointer": [[0.0, 0.0, 0.9375349283218384, 0.0, 0.0, 0.0, 0.0, 0.0014879166847094893, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.023545576259493828, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.021462341770529747, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.004043263848870993, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0466135790920816e-05, 0.0, 0.0, 0.0, 0.0, 9.500028568254493e-07, 0.0, 2.3395669757064752e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0002429884043522179, 0.0, 0.0, 0.0, 0.00033255870221182704, 0.0, 0.0, 0.0, 1.259147325072263e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.010487458668649197, 0.0, 0.0, 0.0, 4.844594627684273e-07, 0.0, 1.55323789385875e-07, 0.0, 3.0118044378468767e-06, 0.0, 6.170171786834544e-07, 0.0, 0.0, 9.99588974082144e-06, 0.0, 0.0008347069378942251, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9.59159251578967e-07, 0.0]], "target": [0.9375349283218384]}, "loss": [0.004584872163832188, 0.06450126320123672], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', 'def get(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', 'state', '=', "''", '#NEWLINE#', 'if', '(', "'orig_url'", 'in', 'request', '.', 'args', ')', ':', '#NEWLINE#', '#INDENT#', 'state', '=', 'base64', '.', 'urlsafe_b64encode', '(', 'request', '.', 'args', '[', "'orig_url'", ']', '.', 'encode', '(', "'utf-8'", ')', ')', '#NEWLINE#', '#UNINDENT#', 'if', '(', '(', "'refresh_token'", 'in', 'request', '.', 'cookies', ')', 'and', '(', "'refresh_email'", 'in', 'request', '.', 'cookies', ')', ')', ':', '#NEWLINE#', '#INDENT#', 'resp', '=', 'auth_with_refresh_token', '(', 'request', '.', 'cookies', ')', '#NEWLINE#', 'email', '=', 'Fernet', '(', 'current_app', '.', 'config', '[', "'COOKIE_ENCRYPTION_KEY'", ']', ')', '.', 'decrypt', '(', 'str', '(', 'request', '.', 'cookies', '[', "'refresh_email'", ']', ')', ')', '#NEWLINE#', 'set_session_state', '(', 'access_token', '=', 'resp', '[', "'access_token'", ']', ',', 'email', '=', 'email', ')', '#NEWLINE#', 'return', 'get_orig_url_redirect', '(', 'state', ')', '#NEWLINE#', '#UNINDENT#', 'redirect_uri', '=', 'url_for', '(', 'auth_uri', '.', 'authorized_url', ',', '_external', '=', 'True', ')', '#NEWLINE#', 'flow', '=', 'get_auth_flow', '(', 'redirect_uri', '=', 'redirect_uri', ',', 'state', '=', 'state', ')', '#NEWLINE#', 'auth_uri', '=', 'flow', '.', 'step1_get_authorize_url', '(', ')', '#NEWLINE#', 'return', 'redirect', '(', 'auth_uri', ')']


All attention probs:

[0.011888973414897919, 0.009467337280511856, 0.038198322057724, 0.01397903636097908, 0.010109375230967999, 0.009160485118627548, 0.00770860631018877, 0.02087712474167347, 0.008090384304523468, 0.007381260395050049, 0.00865878351032734, 0.008697347715497017, 0.007024778984487057, 0.010126203298568726, 0.006249822676181793, 0.013225696049630642, 0.005638207774609327, 0.0058837877586483955, 0.005319800693541765, 0.006221518851816654, 0.007256190292537212, 0.006629748269915581, 0.016625700518488884, 0.005253355484455824, 0.00681917043402791, 0.0037432427052408457, 0.0036651294212788343, 0.0038072457537055016, 0.008819002658128738, 0.003291106317192316, 0.004158833529800177, 0.003722832538187504, 0.006642453838139772, 0.004919837694615126, 0.0032271072268486023, 0.00397745193913579, 0.0038773282431066036, 0.004853758029639721, 0.0039411685429513454, 0.003070264356210828, 0.004727080464363098, 0.0045559401623904705, 0.006672386545687914, 0.003330191830173135, 0.002930829068645835, 0.005317043978720903, 0.0032824184745550156, 0.007660069037228823, 0.0032055769115686417, 0.004069717600941658, 0.002378306584432721, 0.003257535398006439, 0.002396151190623641, 0.0029103688430041075, 0.002946634544059634, 0.008264876902103424, 0.002557522151619196, 0.0035581770353019238, 0.0024602541234344244, 0.0029849186539649963, 0.0033913839142769575, 0.003788420930504799, 0.004114376846700907, 0.013604118488729, 0.003514968091621995, 0.004937336780130863, 0.0034721989650279284, 0.010795769281685352, 0.0029428228735923767, 0.0031509101390838623, 0.003005800535902381, 0.005347490776330233, 0.011080271564424038, 0.0032336292788386345, 0.004131707362830639, 0.0028553674928843975, 0.007790897972881794, 0.0022024239879101515, 0.0032474417239427567, 0.00250512664206326, 0.003059038892388344, 0.0030272386502474546, 0.0028820072766393423, 0.0022589382715523243, 0.0031739247497171164, 0.0029093727935105562, 0.004146302118897438, 0.004839078523218632, 0.009622752666473389, 0.0025311969220638275, 0.0036538904532790184, 0.002458000322803855, 0.004114564508199692, 0.0028685007710009813, 0.0029173544608056545, 0.002961143385618925, 0.005085200071334839, 0.010748397558927536, 0.005907395388931036, 0.01081742625683546, 0.003425142029300332, 0.013301328755915165, 0.0030764660332351923, 0.004955456592142582, 0.0034455631393939257, 0.0028252187184989452, 0.007147496100515127, 0.002897032303735614, 0.01726890727877617, 0.0022807414643466473, 0.004834967665374279, 0.005471973679959774, 0.0058592273853719234, 0.003294531721621752, 0.01731118932366371, 0.0021331270691007376, 0.0037348265759646893, 0.0037353839725255966, 0.012186190113425255, 0.004205517936497927, 0.004715027753263712, 0.0036181972827762365, 0.058710403740406036, 0.0033940558787435293, 0.004104324616491795, 0.0050131529569625854, 0.006022235844284296, 0.005190105643123388, 0.004334328230470419, 0.0031224344857037067, 0.004952030256390572, 0.01216021180152893, 0.0034495689906179905, 0.006750561762601137, 0.0031013768166303635, 0.006887692026793957, 0.002764336299151182, 0.01677076146006584, 0.0023705773055553436, 0.007368091959506273, 0.0030034321825951338, 0.01945015788078308, 0.0023066620342433453, 0.004239304456859827, 0.013396208174526691, 0.003720771986991167, 0.00834013894200325, 0.0023062583059072495, 0.005921196658164263, 0.004575541242957115, 0.0035368185490369797, 0.005305023863911629, 0.007507031783461571, 0.0065041473135352135, 0.0067954836413264275, 0.017768552526831627, 0.006365539040416479]


Top-k source tokens:

['auth_uri', 'self', 'state', 'state', 'auth_uri', 'state', 'email', 'redirect_uri', 'state', ')']


Top-k attention probs:

[0.058710403740406036, 0.038198322057724, 0.02087712474167347, 0.01945015788078308, 0.017768552526831627, 0.01731118932366371, 0.01726890727877617, 0.01677076146006584, 0.016625700518488884, 0.01397903636097908]
