
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "def detect_mode(", "code", ",", "filename", ")", ":", "#NEWLINE#", "#INDENT#", "module", "=", "ast", ".", "parse", "(", "(", "code", "+", "'\\n\\n'", ")", ",", "filename", "=", "e", ")", "#NEWLINE#", "mode", "=", "'STATIC'", "#NEWLINE#", "for", "node", "in", "module", ".", "body", ":", "#NEWLINE#", "#INDENT#", "if", "isinstance", "(", "node", ",", "ast", ".", "FunctionDef", ")", ":", "#NEWLINE#", "#INDENT#", "if", "activeModeFunc", ".", "match", "(", "node", ".", "name", ")", ":", "#NEWLINE#", "#INDENT#", "mode", "=", "'ACTIVE'", "#NEWLINE#", "break", "#NEWLINE#", "#UNINDENT#", "#UNINDENT#", "#UNINDENT#", "if", "(", "mode", "==", "'STATIC'", ")", ":", "#NEWLINE#", "#INDENT#", "return", "(", "mode", ",", "None", ")", "#NEWLINE#", "#UNINDENT#", "for", "node", "in", "module", ".", "body", ":", "#NEWLINE#", "#INDENT#", "if", "(", "not", "isinstance", "(", "node", ",", "ast", ".", "Expr", ")", ")", ":", "#NEWLINE#", "#INDENT#", "continue", "#NEWLINE#", "#UNINDENT#", "e", "=", "node", ".", "value", "#NEWLINE#", "if", "(", "not", "isinstance", "(", "e", ",", "ast", ".", "Call", ")", ")", ":", "#NEWLINE#", "#INDENT#", "continue", "#NEWLINE#", "#UNINDENT#", "f", "=", "e", ".", "func", "#NEWLINE#", "if", "(", "hasattr", "(", "f", ",", "'id'", ")", "and", "illegalActiveModeCall", ".", "match", "(", "f", ".", "id", ")", ")", ":", "#NEWLINE#", "#INDENT#", "return", "(", "'MIXED'", ",", "MixedModeError", "(", "(", "'You can\\'t call %s() outside a function in \"active mode\".'", "%", "f", ".", "id", ")", ",", "__file__", ",", "(", "node", ".", "lineno", "-", "1", ")", ")", ")", "#NEWLINE#", "#UNINDENT#", "#UNINDENT#", "return", "(", "mode", ",", "None", ")"], "error_location": [23], "repair_targets": [4, 21], "repair_candidates": [26, 63, 74, 83, 197, 9, 33, 92, 2, 16, 4, 21, 140, 150, 159, 176, 31, 42, 56, 90, 103, 118, 184, 23, 116, 127, 142], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "jdf/processing.py/runtime/src/jycessing/detect_sketch_mode.py", "license": "apache-2.0", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 1454, "results": {"model": "transformer", "prob": {"loc": [[0.00017957320960704237, 7.196735984926761e-10, 3.900004486023789e-10, 2.0281784932074665e-11, 2.0300885417157133e-09, 3.015660637872841e-11, 3.535084724948234e-11, 4.1503515901819554e-11, 3.380763377580642e-11, 2.4207783000385064e-10, 3.123571540308845e-11, 1.6960195400872458e-11, 1.4813076112951684e-11, 2.6847638695537412e-11, 4.91951653025513e-11, 1.3912923590986281e-10, 1.0257080163000865e-07, 5.0502522302986463e-11, 3.056290331926448e-09, 3.177939161824739e-11, 1.7530841361912408e-11, 1.6133980262900138e-10, 4.928372640544687e-11, 0.9997557997703552, 9.16438175346812e-11, 3.3871658949857775e-11, 1.0006796780093197e-10, 1.959107875926236e-11, 3.9240458105105347e-10, 5.249478629565374e-11, 5.642319250709349e-11, 6.242935945977024e-09, 6.551396578013957e-12, 2.2846993630309953e-08, 5.3901036412007386e-11, 1.5285451723801025e-11, 8.809485085858881e-11, 3.185676722416986e-11, 2.2599269677847644e-11, 2.4203937465383518e-11, 7.31966050271371e-12, 2.277495206315372e-11, 9.361345831848666e-08, 3.2069163297121506e-11, 8.638357251733453e-10, 2.0097225272852626e-10, 4.950880677645486e-11, 1.641059857449001e-11, 4.917218368594156e-11, 2.4432093501114416e-11, 1.1826380152957228e-11, 1.0180344414689735e-11, 1.893346243675431e-11, 2.5305249215512582e-11, 7.602743434809156e-11, 1.7225406864773696e-11, 9.579670745551994e-08, 1.8117031486131197e-10, 9.247346638430187e-11, 7.56247581917835e-12, 5.1330311529040884e-11, 1.3752453169313394e-11, 6.129491445655555e-12, 9.655360538873836e-11, 3.668020748248679e-11, 1.446484265699155e-09, 1.2842115391931141e-11, 1.0979317455195314e-10, 1.832715403049523e-11, 1.9683404212100797e-11, 1.9436764697733366e-11, 1.8692689757182634e-11, 1.1530408572379969e-11, 1.4414124407946538e-11, 1.7369643501297105e-06, 1.0811531531151886e-10, 2.1134467786954048e-10, 2.2938874758016148e-11, 5.6145789406603086e-11, 3.415197291634087e-11, 1.4044549377645321e-11, 3.661825183354228e-12, 4.283478433064758e-11, 3.1241395390679827e-06, 2.4577966398209306e-11, 2.535559436023238e-11, 2.102982891993843e-11, 2.9628542674853264e-11, 3.744763180102417e-11, 4.6144293247563084e-11, 1.1697464108451072e-09, 4.7018322395231404e-12, 9.664661774877459e-06, 8.877054646916349e-11, 1.2822901594711222e-11, 1.0971907410395332e-10, 4.1390071925384575e-11, 3.3324468184936507e-11, 2.4356020672522405e-11, 3.004207299595052e-11, 7.91879201100798e-11, 1.514594526186297e-11, 7.931398593452599e-11, 1.5441568734786415e-07, 2.513659419500769e-11, 1.0023484264820581e-08, 1.8554803526971142e-10, 8.059420492090297e-11, 2.951134128736932e-11, 2.0695814853533e-11, 7.71216493444804e-11, 4.8806087643571416e-11, 3.574375170845023e-11, 1.107645156150916e-10, 4.301285022600965e-11, 2.707043963989797e-11, 2.8792890294226936e-10, 3.2176833419939044e-10, 1.4527053338042606e-07, 5.931783536583524e-11, 1.802829760477742e-11, 1.016182277213673e-10, 2.3898468273775286e-11, 2.977845400820023e-11, 8.434560688774795e-11, 8.458645589515257e-11, 1.1715098335862706e-10, 1.6807580323074944e-06, 2.6047492288072682e-11, 1.8514697330829222e-08, 2.0463453154206945e-10, 5.928559726475768e-11, 3.421019023619465e-11, 1.689124014270238e-11, 1.5338466607950352e-10, 5.560217217204233e-11, 4.2695385421565035e-11, 2.2630897156261653e-10, 5.840711247984132e-11, 5.1313866350488624e-11, 3.0371816173158095e-10, 6.068372800788202e-12, 4.4153179601380543e-07, 5.573458014551669e-11, 1.2282844186195518e-10, 6.714505340621457e-11, 1.4382248170186074e-10, 5.052741003375161e-10, 3.063876374831409e-10, 5.794528745717287e-11, 2.5272501602557895e-07, 1.1068806982095225e-10, 1.3706005774771768e-10, 2.100801997639845e-11, 6.310389710773023e-11, 4.439338133210846e-11, 3.8641725236265856e-11, 1.1217966833232396e-10, 1.3945729120112826e-11, 7.939489705677261e-07, 2.7285423920275775e-10, 7.815093711061039e-11, 3.148100530259157e-11, 2.761609864398995e-11, 2.470521009989568e-10, 9.645145099268504e-11, 5.1135564532733824e-11, 1.656822942730507e-11, 3.32803194724729e-11, 4.195956027075454e-09, 2.1774303193833333e-10, 1.5932812361119097e-11, 2.809704205408714e-11, 1.8762855158449554e-10, 2.0452176063834315e-10, 1.0857616195014685e-10, 2.661202245235472e-07, 1.7333816326736695e-10, 3.566203235494392e-11, 1.8862597248037183e-11, 2.97971439189304e-11, 2.786958885891977e-09, 3.476019472259395e-11, 9.928526056857123e-11, 4.0573537262389436e-05, 1.8115926814221694e-10, 3.42771401540265e-11, 1.5395945629492758e-10, 2.080665861825537e-09, 1.6728118890085852e-10, 1.361696727597561e-10, 1.1022079082767533e-10, 4.6490065269688685e-11, 4.405286552211507e-11, 4.137594433739622e-11, 1.8605932766702082e-11, 9.079060420136287e-11, 5.499699909705669e-06, 3.255587466277632e-10, 6.321511647477962e-10, 3.3607122640333387e-10]], "pointer": [[0.0, 0.0, 0.0004950740258209407, 0.0, 0.001964736497029662, 0.0, 0.0, 0.0, 0.0, 8.450753057331895e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 7.0117325776664075e-06, 0.0, 0.0, 0.0, 0.0, 0.9974911212921143, 0.0, 1.588788434148114e-09, 0.0, 0.0, 5.263563707558205e-06, 0.0, 0.0, 0.0, 0.0, 9.370689440402202e-06, 0.0, 1.0391951832389168e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.982970042670786e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.4662633418538462e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9.628814723328105e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.418179008145671e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.482225162722898e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.332913936697878e-06, 0.0, 7.645191431038256e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.5243979589740775e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.5026863568200497e-06, 0.0, 3.854704289096844e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.543943284332272e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 8.801604963082355e-06, 0.0, 1.4285706129157916e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.696167939575389e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.9428309769864427e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.069669562843046e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.5823817395576043e-06, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.01340878145129e-07, 0.0, 0.0, 0.0]], "target": [0.9994558691978455]}, "loss": [0.00024434918304905295, 0.0005442788824439049], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', 'def detect_mode(', 'code', ',', 'filename', ')', ':', '#NEWLINE#', '#INDENT#', 'module', '=', 'ast', '.', 'parse', '(', '(', 'code', '+', "'\\n\\n'", ')', ',', 'filename', '=', 'e', ')', '#NEWLINE#', 'mode', '=', "'STATIC'", '#NEWLINE#', 'for', 'node', 'in', 'module', '.', 'body', ':', '#NEWLINE#', '#INDENT#', 'if', 'isinstance', '(', 'node', ',', 'ast', '.', 'FunctionDef', ')', ':', '#NEWLINE#', '#INDENT#', 'if', 'activeModeFunc', '.', 'match', '(', 'node', '.', 'name', ')', ':', '#NEWLINE#', '#INDENT#', 'mode', '=', "'ACTIVE'", '#NEWLINE#', 'break', '#NEWLINE#', '#UNINDENT#', '#UNINDENT#', '#UNINDENT#', 'if', '(', 'mode', '==', "'STATIC'", ')', ':', '#NEWLINE#', '#INDENT#', 'return', '(', 'mode', ',', 'None', ')', '#NEWLINE#', '#UNINDENT#', 'for', 'node', 'in', 'module', '.', 'body', ':', '#NEWLINE#', '#INDENT#', 'if', '(', 'not', 'isinstance', '(', 'node', ',', 'ast', '.', 'Expr', ')', ')', ':', '#NEWLINE#', '#INDENT#', 'continue', '#NEWLINE#', '#UNINDENT#', 'e', '=', 'node', '.', 'value', '#NEWLINE#', 'if', '(', 'not', 'isinstance', '(', 'e', ',', 'ast', '.', 'Call', ')', ')', ':', '#NEWLINE#', '#INDENT#', 'continue', '#NEWLINE#', '#UNINDENT#', 'f', '=', 'e', '.', 'func', '#NEWLINE#', 'if', '(', 'hasattr', '(', 'f', ',', "'id'", ')', 'and', 'illegalActiveModeCall', '.', 'match', '(', 'f', '.', 'id', ')', ')', ':', '#NEWLINE#', '#INDENT#', 'return', '(', "'MIXED'", ',', 'MixedModeError', '(', '(', '\'You can\\\'t call %s() outside a function in "active mode".\'', '%', 'f', '.', 'id', ')', ',', '__file__', ',', '(', 'node', '.', 'lineno', '-', '1', ')', ')', ')', '#NEWLINE#', '#UNINDENT#', '#UNINDENT#', 'return', '(', 'mode', ',', 'None', ')']


All attention probs:

[0.009973188862204552, 0.0087174903601408, 0.02115608938038349, 0.011754206381738186, 0.025272080674767494, 0.01096845418214798, 0.006669493857771158, 0.006571043748408556, 0.005951376631855965, 0.016499660909175873, 0.006579359527677298, 0.008777160197496414, 0.0051536038517951965, 0.006111529190093279, 0.005931067280471325, 0.0058125779032707214, 0.013955197297036648, 0.005138754844665527, 0.00668291375041008, 0.005375711712986231, 0.005280573386698961, 0.010471380315721035, 0.004679971374571323, 0.03893471881747246, 0.003974539693444967, 0.004659115802496672, 0.01289595291018486, 0.0036011652555316687, 0.004151151515543461, 0.004397433251142502, 0.004282004199922085, 0.015062329359352589, 0.00455135852098465, 0.009921204298734665, 0.002561862114816904, 0.002541274530813098, 0.003533064853399992, 0.004288076423108578, 0.00417124480009079, 0.0048207929357886314, 0.0043494366109371185, 0.0030396287329494953, 0.013779875822365284, 0.0031157229095697403, 0.005372288636863232, 0.0026363725773990154, 0.003471153788268566, 0.0020143792498856783, 0.0025191050954163074, 0.0036571836099028587, 0.003219978418201208, 0.0027616803999990225, 0.004643946420401335, 0.001954991603270173, 0.0024880659766495228, 0.002687956439331174, 0.008464754559099674, 0.00204437761567533, 0.002802190836519003, 0.002053210511803627, 0.002489621052518487, 0.002670497866347432, 0.0025883966591209173, 0.011633615009486675, 0.002385560190305114, 0.004528638441115618, 0.0033219687175005674, 0.004723253659904003, 0.0034916973672807217, 0.003562221070751548, 0.003524984233081341, 0.0034122273791581392, 0.004163311794400215, 0.0022246395237743855, 0.012415500357747078, 0.0024157853331416845, 0.003616082714870572, 0.0019392571412026882, 0.0020615747198462486, 0.003064287593588233, 0.0030088042840361595, 0.003288556355983019, 0.0027707789558917284, 0.013168076984584332, 0.0024239053018391132, 0.0021929803770035505, 0.002727303421124816, 0.0039012664929032326, 0.003693160368129611, 0.0033468434121459723, 0.013003556057810783, 0.0038849038537591696, 0.013164035975933075, 0.0017524677095934749, 0.002286965027451515, 0.0027804584242403507, 0.003056918503716588, 0.0031721896957606077, 0.004020080901682377, 0.003986186347901821, 0.002931772032752633, 0.003575120121240616, 0.00319567765109241, 0.010063217021524906, 0.0028717813547700644, 0.004354144912213087, 0.0017383237136527896, 0.0027864917647093534, 0.001699428423307836, 0.0020191092044115067, 0.0027165906503796577, 0.003917415626347065, 0.003241601400077343, 0.0031828992068767548, 0.0029155821539461613, 0.0029210946522653103, 0.009573162533342838, 0.0029131227638572454, 0.007228565867990255, 0.0015443742740899324, 0.002525533549487591, 0.0034181198570877314, 0.004524474032223225, 0.004031965974718332, 0.003291485598310828, 0.0037774841766804457, 0.0030960238073021173, 0.011947013437747955, 0.002709234831854701, 0.0039178659208118916, 0.0016332250088453293, 0.0023847369011491537, 0.0020872356835752726, 0.0018481523729860783, 0.0022637490183115005, 0.002868054434657097, 0.002548439195379615, 0.0033488234039396048, 0.0029561049304902554, 0.003113947808742523, 0.011333884671330452, 0.0034757775720208883, 0.010236346162855625, 0.0013674474321305752, 0.003395084524527192, 0.0031193254981189966, 0.003164487425237894, 0.003033602377399802, 0.002300332533195615, 0.0030742234084755182, 0.012098233215510845, 0.002668436849489808, 0.0036090309731662273, 0.003323423443362117, 0.004582745023071766, 0.0028531509451568127, 0.002397167729213834, 0.0038113249465823174, 0.0032072821632027626, 0.012907219119369984, 0.002054906915873289, 0.0029370535630732775, 0.0020132260397076607, 0.0024911644868552685, 0.0024292266461998224, 0.003187779104337096, 0.002992942463606596, 0.005301660858094692, 0.0022544804960489273, 0.004805614706128836, 0.0022781817242503166, 0.002355054719373584, 0.0025673718191683292, 0.003440316766500473, 0.0024249362759292126, 0.0024691589642316103, 0.01222916692495346, 0.0016952402656897902, 0.002821133704856038, 0.0019408664666116238, 0.0022421486210078, 0.003747052513062954, 0.002320429077371955, 0.0027640697080641985, 0.011714211665093899, 0.0023138190153986216, 0.0033770117443054914, 0.005070304963737726, 0.005153175443410873, 0.0036966323386877775, 0.0034212025348097086, 0.003259285818785429, 0.005199686158448458, 0.00479096407070756, 0.004550959914922714, 0.0060974969528615475, 0.0033537521958351135, 0.02419418841600418, 0.002681226236745715, 0.0024640688207000494, 0.002490126760676503]


Top-k source tokens:

['e', 'filename', 'mode', 'code', 'module', 'node', 'code', 'node', 'mode', 'module']


Top-k attention probs:

[0.03893471881747246, 0.025272080674767494, 0.02419418841600418, 0.02115608938038349, 0.016499660909175873, 0.015062329359352589, 0.013955197297036648, 0.013779875822365284, 0.013168076984584332, 0.013164035975933075]
