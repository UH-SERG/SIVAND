
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "def test_unique_3(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "'Map a table with a two-column unique constraint'", "#NEWLINE#", "stmts", "=", "[", "'CREATE TABLE t1 (c1 INTEGER, c2 CHAR(5), c3 TEXT, UNIQUE (c1, c2))'", "]", "#NEWLINE#", "dbmap", "=", "self", ".", "to_map", "(", "dbmap", ")", "#NEWLINE#", "if", "(", "self", ".", "db", ".", "version", "<", "90000", ")", ":", "#NEWLINE#", "#INDENT#", "self", ".", "map_unique2", ".", "update", "(", "{", "#NEWLINE#", "#INDENT#", "'unique_constraints'", ":", "{", "#NEWLINE#", "#INDENT#", "'t1_c1_key'", ":", "{", "#NEWLINE#", "#INDENT#", "'columns'", ":", "[", "'c1'", ",", "'c2'", "]", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", ",", "#NEWLINE#", "#UNINDENT#", "}", ")", "#NEWLINE#", "#UNINDENT#", "assert", "(", "dbmap", "[", "'schema public'", "]", "[", "'table t1'", "]", "==", "self", ".", "map_unique2", ")"], "error_location": [21], "repair_targets": [9], "repair_candidates": [15, 21, 80, 2, 17, 26, 37, 88, 9], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "perseas/Pyrseas/tests/dbobject/test_constraint.py", "license": "bsd-3-clause", "note": "license: bigquery_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 1686, "results": {"model": "transformer", "prob": {"loc": [[2.8445489078876562e-05, 1.2159939721811952e-08, 5.9774003524637465e-09, 1.7310264333048053e-09, 1.2254698367186734e-09, 1.0929531724102048e-09, 6.67669364240453e-10, 1.6137526870352303e-09, 3.922428770675168e-10, 9.718878146713905e-08, 1.598479215658699e-08, 3.848391543215257e-07, 1.7401474039502318e-08, 5.01215957626755e-09, 7.930100465181056e-10, 8.985352017987225e-09, 3.376859347703487e-10, 3.5493264577413086e-11, 4.8179543687965065e-11, 6.669184093865965e-10, 2.5693869254439505e-09, 0.9998643398284912, 3.440071338900452e-08, 3.829580652592313e-09, 1.5068103431659097e-09, 5.382588152968992e-09, 4.466232894628774e-06, 1.9464301004301632e-10, 7.010380054239818e-10, 4.558349253613869e-10, 2.3852297914572773e-10, 1.2886840927706089e-08, 7.395890833095109e-08, 1.988147424469844e-09, 4.135617626133126e-09, 1.5167718470099345e-10, 7.132273244225829e-11, 1.449335929049056e-10, 9.408367314389654e-12, 2.0032265776737113e-11, 4.641882017653032e-11, 7.200067625445783e-11, 2.0360562125176784e-09, 1.5658585539313208e-08, 7.371421251178845e-10, 6.807856361978892e-11, 2.1906436387109096e-10, 1.0941247907680918e-10, 1.8439549887006024e-09, 2.2043744607458393e-10, 1.7527571061215497e-10, 1.5572085843018613e-09, 1.030652230227247e-10, 5.504252609256355e-10, 2.1397951466273213e-10, 2.363239604008527e-10, 1.037645080970151e-09, 3.9111328065111195e-10, 1.2711268482235027e-08, 1.5641212769423873e-08, 2.565117007691242e-09, 3.344414301054144e-09, 2.3501556256633194e-09, 5.521392232310518e-10, 1.8887662267541572e-10, 9.780024706751433e-11, 2.137013621617001e-10, 1.4370755974102423e-10, 7.937072526997824e-11, 7.067111479353017e-11, 1.1765996510426646e-10, 1.3113005126186295e-10, 1.0703583158688801e-10, 1.0977327380423674e-10, 7.04296121423198e-10, 1.5676202003156448e-10, 2.456045089527237e-10, 3.2920158266058763e-10, 3.984481189434064e-09, 1.28601196358602e-09, 0.00010009212564909831, 2.1492871482564624e-08, 1.666638809183496e-07, 3.930983982769476e-09, 2.1555356610747367e-08, 3.172299400944212e-08, 1.9946377882718025e-10, 4.3075837341532974e-10, 1.7917903960551484e-06, 6.688837678181514e-11, 1.1457038096018834e-10, 2.892714123792217e-10]], "pointer": [[0.0, 0.0, 3.0186583899194375e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.9999966621398926, 0.0, 0.0, 0.0, 0.0, 0.0, 2.8111603569414e-06, 0.0, 1.1023021606604289e-08, 0.0, 0.0, 0.0, 4.654734375719727e-10, 0.0, 0.0, 0.0, 0.0, 1.2873779375865979e-08, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9.394257816097706e-09, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.2362264101284381e-07, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7005831187688614e-09, 0.0, 0.0, 0.0]], "target": [0.9999966621398926]}, "loss": [0.0001357701694360003, 3.337865791763761e-06], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', 'def test_unique_3(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', "'Map a table with a two-column unique constraint'", '#NEWLINE#', 'stmts', '=', '[', "'CREATE TABLE t1 (c1 INTEGER, c2 CHAR(5), c3 TEXT, UNIQUE (c1, c2))'", ']', '#NEWLINE#', 'dbmap', '=', 'self', '.', 'to_map', '(', 'dbmap', ')', '#NEWLINE#', 'if', '(', 'self', '.', 'db', '.', 'version', '<', '90000', ')', ':', '#NEWLINE#', '#INDENT#', 'self', '.', 'map_unique2', '.', 'update', '(', '{', '#NEWLINE#', '#INDENT#', "'unique_constraints'", ':', '{', '#NEWLINE#', '#INDENT#', "'t1_c1_key'", ':', '{', '#NEWLINE#', '#INDENT#', "'columns'", ':', '[', "'c1'", ',', "'c2'", ']', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ',', '#NEWLINE#', '#UNINDENT#', '}', ')', '#NEWLINE#', '#UNINDENT#', 'assert', '(', 'dbmap', '[', "'schema public'", ']', '[', "'table t1'", ']', '==', 'self', '.', 'map_unique2', ')']


All attention probs:

[0.0215546116232872, 0.012833706103265285, 0.052635885775089264, 0.0156331118196249, 0.010684628039598465, 0.012143922038376331, 0.010774964466691017, 0.014151353389024734, 0.012225599959492683, 0.05098326876759529, 0.012224147096276283, 0.011727734468877316, 0.008568507619202137, 0.00834589172154665, 0.011284144595265388, 0.0489976704120636, 0.012823839671909809, 0.018099915236234665, 0.006025734357535839, 0.006651274859905243, 0.0072761713527143, 0.042760301381349564, 0.005743315443396568, 0.008189569227397442, 0.008351655676960945, 0.006276924163103104, 0.030450724065303802, 0.004001145251095295, 0.00545037304982543, 0.004763223696500063, 0.006270189769566059, 0.006467853672802448, 0.009907444007694721, 0.005419149994850159, 0.006780982483178377, 0.007856972515583038, 0.007766474038362503, 0.01444550696760416, 0.0047975811176002026, 0.006716578733175993, 0.004006354603916407, 0.007037699688225985, 0.009765982627868652, 0.006401353050023317, 0.007205032743513584, 0.007604182697832584, 0.011513227596879005, 0.006647416856139898, 0.005905195605009794, 0.006543345749378204, 0.006445812061429024, 0.013442792929708958, 0.005979651119560003, 0.005336790811270475, 0.005449446849524975, 0.005573269445449114, 0.007433746941387653, 0.0065977731719613075, 0.005409944802522659, 0.007551817689090967, 0.005588713102042675, 0.007827152498066425, 0.004961726255714893, 0.005072928033769131, 0.008793964050710201, 0.010123883374035358, 0.014079085551202297, 0.009233959019184113, 0.010037252679467201, 0.009244692511856556, 0.01209438405930996, 0.0070840041153132915, 0.008816162124276161, 0.00794763583689928, 0.009601867757737637, 0.005632386077195406, 0.007774520665407181, 0.0066184671595692635, 0.009584768675267696, 0.005461433436721563, 0.0491236187517643, 0.005255109164863825, 0.006979791913181543, 0.005840766709297895, 0.005988636519759893, 0.006647785659879446, 0.005689539946615696, 0.007003644946962595, 0.025069154798984528, 0.004697843920439482, 0.006144476123154163, 0.006067751441150904]


Top-k source tokens:

['self', 'stmts', 'dbmap', 'dbmap', 'dbmap', 'self', 'self', '#NEWLINE#', 'self', ')']


Top-k attention probs:

[0.052635885775089264, 0.05098326876759529, 0.0491236187517643, 0.0489976704120636, 0.042760301381349564, 0.030450724065303802, 0.025069154798984528, 0.0215546116232872, 0.018099915236234665, 0.0156331118196249]
