
Original sample:

{"has_bug": true, "bug_kind": 1, "bug_kind_name": "VARIABLE_MISUSE", "source_tokens": ["#NEWLINE#", "def test_signal_handler_unsubscribe(", "self", ")", ":", "#NEWLINE#", "#INDENT#", "try", ":", "#NEWLINE#", "#INDENT#", "from", "signal", "import", "SIGTERM", "#NEWLINE#", "#UNINDENT#", "except", "ImportError", ":", "#NEWLINE#", "#INDENT#", "return", "self", ".", "skip", "(", "'skipped (no SIGTERM) '", ")", "#NEWLINE#", "#UNINDENT#", "try", ":", "#NEWLINE#", "#INDENT#", "from", "os", "import", "kill", "#NEWLINE#", "#UNINDENT#", "except", "ImportError", ":", "#NEWLINE#", "#INDENT#", "return", "self", ".", "skip", "(", "'skipped (no os.kill) '", ")", "#NEWLINE#", "#UNINDENT#", "p", "=", "helper", ".", "CPProcess", "(", "ssl", "=", "(", "self", ".", "scheme", ".", "lower", "(", ")", "==", "'https'", ")", ")", "#NEWLINE#", "p", ".", "write_conf", "(", "extra", "=", "'unsubsig: True\\ntest_case_name: \"test_signal_handler_unsubscribe\"\\n'", ")", "#NEWLINE#", "p", ".", "start", "(", "imports", "=", "'cherrypy.test._test_states_demo'", ")", "#NEWLINE#", "os", ".", "kill", "(", "p", ".", "get_pid", "(", ")", ",", "SIGTERM", ")", "#NEWLINE#", "p", ".", "join", "(", ")", "#NEWLINE#", "target_line", "=", "open", "(", "p", ".", "error_log", ",", "'rb'", ")", ".", "readlines", "(", ")", "[", "(", "-", "10", ")", "]", "#NEWLINE#", "if", "(", "not", "(", "ntob", "(", "'I am an old SIGTERM handler.'", ")", "in", "p", ")", ")", ":", "#NEWLINE#", "#INDENT#", "self", ".", "fail", "(", "(", "'Old SIGTERM handler did not run.\\n%r'", "%", "target_line", ")", ")"], "error_location": [143], "repair_targets": [113, 156], "repair_candidates": [113, 156, 2, 23, 47, 64, 149, 55, 76, 85, 98, 107, 117, 143], "provenances": [{"datasetProvenance": {"datasetName": "ETHPy150Open", "filepath": "AppScale/appscale/AppServer/lib/cherrypy/cherrypy/test/test_states.py", "license": "apache-2.0", "note": "license: github_api"}}], "txt_file": "eval__VARIABLE_MISUSE__SStuB.txt-00000-of-00300", "js_count": 327, "results": {"model": "transformer", "prob": {"loc": [[0.3174707591533661, 2.15455338548054e-06, 1.1780695103880134e-06, 6.2709055725918e-08, 7.037913007934549e-08, 8.789994865310291e-08, 6.283237752313653e-08, 1.1753458650787252e-08, 6.967337640162441e-08, 5.278003811781673e-08, 2.752335248601412e-08, 2.646595760324999e-07, 3.8463535929622594e-06, 6.588121550521464e-07, 1.3699745977646671e-06, 3.511505752840094e-08, 2.9457819294975707e-08, 3.221109778905884e-08, 1.0578016684803515e-08, 1.9698287445635287e-08, 2.9354506381196188e-08, 1.654256465144499e-08, 6.470406876957213e-09, 1.3134727794295031e-07, 3.851987884218033e-08, 1.136913763133407e-08, 9.824528746094074e-08, 2.910239516040747e-07, 5.608010056334933e-08, 5.149970050410957e-08, 2.4134939380360265e-08, 9.412268298092386e-09, 3.0522635086072114e-08, 3.718593433177375e-08, 2.4706150014708328e-08, 3.3051767900360574e-07, 5.269649591355119e-06, 5.392353159550112e-06, 3.220223732114391e-07, 6.182275313904029e-08, 4.0539635648428884e-08, 1.0572737352276818e-07, 1.3818614696958775e-08, 5.872146857655025e-08, 8.708856569228374e-08, 4.835974820593947e-08, 2.462682857640175e-08, 1.0097576819134702e-07, 8.601831069654509e-08, 1.966397711328227e-08, 2.7099085286863556e-07, 6.590597081412852e-07, 1.8921836897334288e-07, 2.8710121569019975e-07, 5.674635161767583e-08, 1.2037050964863738e-06, 9.319771976379343e-08, 1.0853484582185047e-06, 1.448046731411523e-07, 5.086322119041142e-08, 2.212252496747169e-07, 8.000309321687382e-07, 1.868693288997747e-07, 2.512355479211692e-07, 9.620214405003935e-05, 1.7820060804751847e-07, 2.7709926797570006e-08, 1.9011193330698006e-07, 3.7692217347284895e-08, 7.760417020108434e-07, 7.695190618051129e-08, 8.390590977569445e-08, 1.043105385178933e-05, 9.189333809445088e-07, 5.115365979690978e-07, 2.682261026620836e-07, 2.086070054474476e-07, 7.835882342988043e-08, 7.076328500943418e-08, 1.7836723031905422e-07, 7.95028967104372e-08, 1.232808358508919e-06, 6.583414688066114e-06, 4.4158360879009706e-07, 5.814124506287044e-07, 2.2669790666896006e-07, 2.9253044431243325e-07, 4.4641680574386555e-08, 3.8327229390233697e-07, 3.1804492550691066e-07, 6.883201422169805e-07, 4.708841515821405e-06, 2.870010291644576e-07, 3.760796687402035e-07, 9.89263980955002e-07, 1.1499177787754888e-07, 3.133508386099493e-08, 2.39191024320462e-07, 2.828177230185247e-06, 6.423777563213662e-07, 5.976976069632656e-08, 6.946233952476177e-06, 4.313543229272909e-07, 3.7878174907746143e-07, 0.005516611505299807, 7.310392788895115e-07, 3.314690957267885e-07, 4.085203784143232e-07, 1.2516164815679076e-07, 2.0624648300326953e-07, 1.32042123368592e-06, 4.868763312515512e-07, 5.172915393814037e-07, 4.565406470646849e-06, 8.13137006616671e-08, 3.542056958849571e-07, 8.604280310464674e-07, 0.030030986294150352, 1.970052380784182e-06, 1.4287979865912348e-07, 4.747645050429128e-07, 4.758165346174792e-07, 1.1075633921109329e-07, 9.117799493196799e-08, 1.0056560029170214e-07, 2.9984296361362794e-06, 5.016177055949811e-07, 1.2084329625849932e-07, 5.294979473546846e-06, 8.651412031213113e-07, 0.00023472624889109284, 1.7717567288855207e-06, 2.700235882002744e-06, 5.326776317815529e-06, 4.3676936911651865e-06, 2.277231487823883e-06, 1.2643928357647383e-06, 1.8486228725578258e-07, 1.409523520123912e-06, 1.865517674559669e-06, 1.0757717063825112e-05, 6.210959924146664e-08, 8.884045854529177e-08, 0.6452513933181763, 4.366296764146682e-07, 4.6044593204896955e-07, 1.9882813830918167e-06, 4.84985605453403e-07, 2.6864438495977083e-07, 3.805127732903202e-07, 2.440238233702985e-07, 4.840275025230767e-08, 1.3715472277908702e-06, 2.2013098259776598e-06, 4.137556970817968e-06, 1.133320893131895e-06, 0.0012582900235429406, 9.238708571501775e-07, 4.864266429649433e-07]], "pointer": [[0.0, 0.0, 0.016936330124735832, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.007549874018877745, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.004040324129164219, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.012452119961380959, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.02619057148694992, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0013685306767001748, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0008333649602718651, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0004085601249244064, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.006917406339198351, 0.0, 0.0, 0.0, 0.0, 0.0, 0.7382602691650391, 0.0, 0.0, 0.0, 6.334203499136493e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0005620928714051843, 0.0, 0.0, 0.0, 0.0, 0.0, 0.009663709439337254, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.17475345730781555, 0.0, 0.0]], "target": [0.9130136966705322]}, "loss": [0.4381152093410492, 0.0910043939948082], "acc": [0.0, 1.0, 1.0, 1.0]}}


All source tokens:

['#NEWLINE#', 'def test_signal_handler_unsubscribe(', 'self', ')', ':', '#NEWLINE#', '#INDENT#', 'try', ':', '#NEWLINE#', '#INDENT#', 'from', 'signal', 'import', 'SIGTERM', '#NEWLINE#', '#UNINDENT#', 'except', 'ImportError', ':', '#NEWLINE#', '#INDENT#', 'return', 'self', '.', 'skip', '(', "'skipped (no SIGTERM) '", ')', '#NEWLINE#', '#UNINDENT#', 'try', ':', '#NEWLINE#', '#INDENT#', 'from', 'os', 'import', 'kill', '#NEWLINE#', '#UNINDENT#', 'except', 'ImportError', ':', '#NEWLINE#', '#INDENT#', 'return', 'self', '.', 'skip', '(', "'skipped (no os.kill) '", ')', '#NEWLINE#', '#UNINDENT#', 'p', '=', 'helper', '.', 'CPProcess', '(', 'ssl', '=', '(', 'self', '.', 'scheme', '.', 'lower', '(', ')', '==', "'https'", ')', ')', '#NEWLINE#', 'p', '.', 'write_conf', '(', 'extra', '=', '\'unsubsig: True\\ntest_case_name: "test_signal_handler_unsubscribe"\\n\'', ')', '#NEWLINE#', 'p', '.', 'start', '(', 'imports', '=', "'cherrypy.test._test_states_demo'", ')', '#NEWLINE#', 'os', '.', 'kill', '(', 'p', '.', 'get_pid', '(', ')', ',', 'SIGTERM', ')', '#NEWLINE#', 'p', '.', 'join', '(', ')', '#NEWLINE#', 'target_line', '=', 'open', '(', 'p', '.', 'error_log', ',', "'rb'", ')', '.', 'readlines', '(', ')', '[', '(', '-', '10', ')', ']', '#NEWLINE#', 'if', '(', 'not', '(', 'ntob', '(', "'I am an old SIGTERM handler.'", ')', 'in', 'p', ')', ')', ':', '#NEWLINE#', '#INDENT#', 'self', '.', 'fail', '(', '(', "'Old SIGTERM handler did not run.\\n%r'", '%', 'target_line', ')', ')']


All attention probs:

[0.01530801597982645, 0.008555593900382519, 0.05728820338845253, 0.012950888834893703, 0.008645329624414444, 0.008992080576717854, 0.008505075238645077, 0.01139272004365921, 0.007320156320929527, 0.007934062741696835, 0.0083022965118289, 0.008812028914690018, 0.0090197017416358, 0.009582818485796452, 0.009801618754863739, 0.008284502662718296, 0.007690612692385912, 0.009340845979750156, 0.007330153603106737, 0.007247977424412966, 0.007410713005810976, 0.00647691311314702, 0.00603958684951067, 0.011148963123559952, 0.004217366687953472, 0.004185989033430815, 0.0037327792961150408, 0.0038830083794891834, 0.0034362312871962786, 0.00509214773774147, 0.005282361526042223, 0.00565026281401515, 0.00464228168129921, 0.004409061279147863, 0.0041687036864459515, 0.004222550895065069, 0.005988263990730047, 0.009843498468399048, 0.009600664488971233, 0.004821821115911007, 0.004559205379337072, 0.00932004302740097, 0.006181675940752029, 0.00442036148160696, 0.004394651856273413, 0.004246691707521677, 0.004319370724260807, 0.007276989985257387, 0.0029254506807774305, 0.0034501368645578623, 0.002915825927630067, 0.0035260715521872044, 0.002734279725700617, 0.003916184417903423, 0.003902167547494173, 0.02258192002773285, 0.003846505656838417, 0.0042500607669353485, 0.002279754029586911, 0.0028761292342096567, 0.0027911157812923193, 0.0064819129183888435, 0.00283018103800714, 0.0021883107256144285, 0.013300442136824131, 0.002122289501130581, 0.0037645541597157717, 0.0026988242752850056, 0.0034864163026213646, 0.004138682037591934, 0.003069800790399313, 0.0032735904678702354, 0.005032150540500879, 0.003303868230432272, 0.0025971264112740755, 0.00487965252250433, 0.008025948889553547, 0.0021733816247433424, 0.003060606075450778, 0.0028282846324145794, 0.004176194313913584, 0.0028530783019959927, 0.005783446598798037, 0.0025502811186015606, 0.004549331031739712, 0.008204992860555649, 0.002821460133418441, 0.004070848226547241, 0.00361651205457747, 0.005182033404707909, 0.0029322656337171793, 0.00388101814314723, 0.002475098706781864, 0.004529259633272886, 0.009260186925530434, 0.002535492880269885, 0.003673878498375416, 0.003627478377893567, 0.010165692307054996, 0.0023667297791689634, 0.003004872938618064, 0.0041364883072674274, 0.0033084857277572155, 0.004781519528478384, 0.02646518126130104, 0.003049007849767804, 0.005106001161038876, 0.010427392087876797, 0.002264464506879449, 0.0028325803577899933, 0.00470699742436409, 0.0041427635587751865, 0.00536272581666708, 0.017719687893986702, 0.0034285923466086388, 0.004446306731551886, 0.0031001255847513676, 0.02992449887096882, 0.002098385477438569, 0.0030178469605743885, 0.002619763370603323, 0.004746782127767801, 0.003897035727277398, 0.003134708618745208, 0.0040814876556396484, 0.005753318313509226, 0.004630627576261759, 0.004784976132214069, 0.005008367821574211, 0.003701952751725912, 0.007065043319016695, 0.002748646307736635, 0.002720648655667901, 0.0051634786650538445, 0.005872119218111038, 0.003831290639936924, 0.002741185948252678, 0.0024392465129494667, 0.005328677129000425, 0.0033780476078391075, 0.00635520601645112, 0.002571271499618888, 0.0032924225088208914, 0.04342450946569443, 0.0027937903068959713, 0.0027316974010318518, 0.003783163148909807, 0.004285587463527918, 0.0043088095262646675, 0.009621938690543175, 0.0026340335607528687, 0.00495360791683197, 0.005007179919630289, 0.005849698092788458, 0.006622250657528639, 0.00675748148933053, 0.02514370158314705, 0.005264579318463802, 0.005843994207680225]


Top-k source tokens:

['self', 'p', 'p', 'SIGTERM', 'target_line', 'p', 'target_line', '#NEWLINE#', 'self', ')']


Top-k attention probs:

[0.05728820338845253, 0.04342450946569443, 0.02992449887096882, 0.02646518126130104, 0.02514370158314705, 0.02258192002773285, 0.017719687893986702, 0.01530801597982645, 0.013300442136824131, 0.012950888834893703]
